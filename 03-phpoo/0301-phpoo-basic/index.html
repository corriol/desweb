
<!DOCTYPE html>

<html class="no-js" lang="ca">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.2.2, mkdocs-material-7.2.6" name="generator"/>
<title>PHP OO Bàsic - DWES</title>
<link href="../../assets/stylesheets/main.802231af.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.3f5d1f46.min.css" rel="stylesheet"/>
<meta content="#ff6e42" name="theme-color"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
<link href="../../stylesheets/extra.css" rel="stylesheet"/>
</head>
<body data-md-color-accent="" data-md-color-primary="deep-orange" data-md-color-scheme="" dir="ltr">
<script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#poo-en-php-conceptes-basics">
          Salta el contingut
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="DWES" class="md-header__button md-logo" data-md-component="logo" href="../.." title="DWES">
<img alt="logo" src="../../assets/logo.png"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            DWES
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              PHP OO Bàsic
            
          </span>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Cerca" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Cerca" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--integrated" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="DWES" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="DWES">
<img alt="logo" src="../../assets/logo.png"/>
</a>
    DWES
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
        Inici
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../01-intro/">
        1.- Introducció a la programació Web
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../02-phpbasics/">
        2.- El llenguatge PHP
      </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4">
        3.- PHP Orientat a Objectes
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="3.- PHP Orientat a Objectes" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
          3.- PHP Orientat a Objectes
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          PHP OO Bàsic
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        PHP OO Bàsic
      </a>
<nav aria-label="Taula de continguts" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Taula de continguts
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#introduccio">
    Introducció
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#caracteristiques-basiques-de-lus-dobjectes-en-php">
    Característiques bàsiques de l'ús d'objectes en PHP
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#definicio-de-classes">
    Definició de classes
  </a>
<nav aria-label="Definició de classes" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#visibilitat">
    Visibilitat
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#constructor">
    Constructor
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#la-pseuodovariable-this">
    La pseuodovariable $this
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#constants-de-classe">
    Constants de classe
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#utilitzacio-dobjectes">
    Utilització d'objectes
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#comparacio-dobjectes">
    Comparació d'Objectes
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#herencia">
    Herència
  </a>
<nav aria-label="Herència" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#la-paraula-reservada-extends">
    La paraula reservada extends
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#bibliografia">
    Bibliografia
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../0302-phpoo-advanced/">
        PHP OO Avançat
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../0303-errorhandling/">
        Erros i excepcions
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../0399-activities/">
        Activitats
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5">
        4.- Accés a dades amb PHP
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="4.- Accés a dades amb PHP" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
          4.- Accés a dades amb PHP
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../04-data-access/04-data-access-php/">
        Accés a dades amb PHP
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6">
        5.- Manteniment de l'estat
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="5.- Manteniment de l'estat" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
          5.- Manteniment de l'estat
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../05-maintain-state/05-01-intro/">
        Introducció
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../05-maintain-state/05-02-cookies/">
        Galletes (cookies)
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../05-maintain-state/05-03-sessions/">
        Sessions
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../05-maintain-state/05-04-best-practices/">
        Bones pràctiques
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../05-maintain-state/05-99-activities/">
        Activitats
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="poo-en-php-conceptes-basics">POO en PHP. Conceptes bàsics</h1>
<h2 id="introduccio">Introducció</h2>
<p>La programació orientada a objectes (OOP, per les seues sigles en
anglès) és un paradigma de programació.</p>
<p>Paradigma:</p>
<blockquote>
<p>Teoria […] el nucli central de la qual […] suministra la base i el
model per resoldre problemes i avançar en el coneixement.</p>
</blockquote>
<p>Per la qual cosa podem definir la programació orientada a objecte com
un mètode -provat i estudiat- el qual es basa en les interaccions
d'objectes per resoldre les necessitats d'un sistema informàtic.</p>
<p>Un objecte és una estructura que conté dades i el codi que els maneja.</p>
<p>L'estructura dels objectes es defineix en les classes. En elles s'escriu
el codi que defineix el comportament dels objectes i s'indiquen els
membres que formaran part dels objectes d'aquesta classe. Entre els
membres de una classe pot haver-hi:</p>
<ul>
<li><strong>Mètodes</strong>. Són els membres de la classe que contenen el codi de la
    mateixa. Un mètode és com una funció. Pot rebre paràmetres i
    retornar valors.</li>
<li><strong>Atributs o propietats</strong>. Emmagatzemen informació sobre el estat de
    l'objecte al que pertanyen (i per tant, el seu valor pot ser
    diferent per a cadascun dels objectes de la mateixa classe).</li>
</ul>
<p>A la creació de un objecte basat en una classe se li anomena instanciar
una classe i a l'objecte obtingut també se li coneix com a instància
d'aqueixa classe.</p>
<p>Els pilars fonamentals de la POO són:</p>
<ul>
<li><strong>Herència</strong>. És el procés de crear una classe a partir de una altra,
    heretant el seu comportament i característiques i podent
    redefinir-los.</li>
<li><strong>Abstracció</strong>. Fa referència al fet que cada classe oculta en el seu
    interior les peculiaritats de la seua implementació, i presenta a
    l'exterior una sèrie de mètodes (interfície) el comportament dels
    quals està ben definit. Vist des de l'exterior, cada objecte és un
    ens abstracte que realitza un treball.</li>
<li><strong>Polimorfisme</strong>. Un mateix mètode pot tenir comportaments diferents en
    funció de l'objecte amb que s'utilitze.</li>
<li><strong>Encapsulació</strong>. En la POO s'ajunten en un mateix lloc les dades i el
    codi que els manipula.</li>
</ul>
<p>Els avantatges més importants que aporta la programació orientada a
objectes són:</p>
<ul>
<li><strong>Modularitat</strong>. La POO permet dividir els programes en parts o
    mòduls més xicotets, que són independents uns d'uns altres però
    poden comunicar-se entre ells.</li>
<li><strong>Extensibilitat</strong>. Si es desitgen afegir noves característiques a
    una aplicació, la POO facilita aquesta tasca de dues formes: afegint
    nous mètodes al codi, o creant nous objectes que estenguen el
    comportament dels ja existents.</li>
<li><strong>Manteniment</strong>. Els programes desenvolupats utilitzant POO són més
    senzills de mantenir, a causa de la modularitat abans comentada.
    També ajuda seguir certes convencions en escriure'ls , per exemple,
    escriure cada classe en un fitxer propi. No ha d'haver-hi dues
    classes en un mateix fitxer, ni un altre codi a part de el propi de
    la classe.</li>
</ul>
<h2 id="caracteristiques-basiques-de-lus-dobjectes-en-php">Característiques bàsiques de l'ús d'objectes en PHP</h2>
<p>Segurament tot, o la majoria del que acabes de veure, ja ho coneixies,
i és fins i tot probable que sàpigues utilitzar algun llenguatge de
programació orientat a objectes, així que anem a veure directament les
peculiaritats pròpies de PHP en el que fa referència a la POO.</p>
<p>En PHP podemos utilitzar els dos paradigmes de la programació: estructurada i orientada a objectes.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span> <span class="c1">// utilitzant programació estructurada</span>
<span class="linenos" data-linenos="2 "></span><span class="nv">$dwes</span> <span class="o">=</span> <span class="nb">mysqli_connect</span><span class="p">(</span><span class="s1">'localhost'</span><span class="p">,</span> <span class="s1">'dwes'</span><span class="p">,</span> <span class="s1">'abc123.'</span><span class="p">,</span> <span class="s1">'dwes'</span><span class="p">);</span>
<span class="linenos" data-linenos="3 "></span><span class="c1">// utilizant POO</span>
<span class="linenos" data-linenos="4 "></span><span class="nv">$dwes</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">mysqli</span><span class="p">();</span>
<span class="linenos" data-linenos="5 "></span><span class="nv">$dwes</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span><span class="s1">'localhost'</span><span class="p">,</span> <span class="s1">'dwes'</span><span class="p">,</span> <span class="s1">'abc123.'</span><span class="p">,</span> <span class="s1">'dwes'</span><span class="p">);</span>
</code></pre></div>
<p>No obstant açò, el llenguatge PHP original no es va dissenyar amb
característiques d'orientació a objectes. Només a partir de la versió 3,
es van començar a introduir alguns trets de POO en el llenguatge. Açò es
va potenciar en la versió 4, encara que encara de forma molt
rudimentària. Per exemple, en PHP4:</p>
<ul>
<li>Els objectes es passen sempre per valor, no per referència.</li>
<li>No es pot definir el nivell d'accés per als membres de la classe.
    Tots són públics.</li>
<li>No existeixen les interfícies.</li>
<li>No existeixen mètodes destructors.</li>
</ul>
<p>En PHP5 es va reescriure i potenciar el suport d'orientació a objectes del llenguatge, ampliant les seues
característiques i millorant el seu rendiment i el seu funcionament general. Les característiques de POO que 
suporta PHP5 inclouen:</p>
<ul>
<li>Mètodes estàtics.</li>
<li>Mètodes constructors i destructors.</li>
<li>Herència.</li>
<li>Interfícies.</li>
<li>Classes abstractes.</li>
</ul>
<p>Entre les característiques que no inclou PHP5, i que pots conèixer
d'altres llenguatges de programació, estan:</p>
<ul>
<li>Herència múltiple.</li>
<li>Sobrecàrrega de mètodes (tenir diversos mètodes amb el mateix nom,
    però amb funcionalitats diferents. Els mètodes sobrecarregats han de
    tenir diferents paràmetres. Quan es diu al mètode, s'utilitza una o
    una altra versió en funció dels paràmetres amb que es realitze la
    trucada (podent distingir per el seu nombre i per el seu tipus,
    segons el llenguatge de programació utilitzat)) (inclosos els
    mètodes constructors).</li>
<li>Sobrecàrrega d'operadors (similar a la sobrecàrrega de mètodes. Es
    poden definir diverses funcionalitats a un mateix operador, i
    s'utilitzarà una o una altra en funció del tipus dels operands que
    s'usen en cada instant).</li>
</ul>
<p>PHP 7 incorpora millores en el rendiment i el tipat d'arguments, valors de retorn i atributs (des de la versió 7.4)</p>
<h2 id="definicio-de-classes">Definició de classes</h2>
<p>La declaració de una classe en PHP es fa utilitzant la paraula <code>class</code>. A continuació i entre claus, han de 
figurar els membres de la classe.</p>
<p>Convé fer-ho de forma ordenada, primer les propietats o atributs, i
després els mètodes, cadascun amb el seu codi respectiu.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">class</span> <span class="nc">Product</span> <span class="p">{</span>
<span class="linenos" data-linenos="2 "></span>    <span class="k">private</span> <span class="nx">string</span> <span class="nv">$code</span><span class="p">;</span>
<span class="linenos" data-linenos="3 "></span>    <span class="k">public</span> <span class="nx">string</span> <span class="nv">$name</span><span class="p">;</span>
<span class="linenos" data-linenos="4 "></span>    <span class="k">public</span> <span class="nx">float</span> <span class="nv">$price</span><span class="p">;</span>
<span class="linenos" data-linenos="5 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">getSummaryLine</span><span class="p">()</span><span class="o">:</span> <span class="nx">string</span> <span class="p">{</span>
<span class="linenos" data-linenos="6 "></span>        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">;</span>
<span class="linenos" data-linenos="7 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="8 "></span><span class="p">}</span>
</code></pre></div>
<p>En UML la classe anterior es representaria així:</p>
<div class="mermaid">classDiagram
  class Product {
    -string code
    +string name
    +float price
    +string getSummaryLine()
  } 
</div>
<p>Com comentàvem abans, és preferible que cada classe figure en el seu
propi fitxer (<strong><code>Product.php</code></strong>). A més, molts programadors prefereixen
utilitzar per a les classes noms que comencen per lletra majúscula, per
a, d'aquesta forma, distingir-los dels objectes i altres variables.</p>
<p>Una vegada definida la classe, podem usar la paraula <strong><code>new</code></strong> per a
instanciar objectes de la següent forma:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nv">$product</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Product</span><span class="p">();</span>
</code></pre></div>
<p>Perquè la línia anterior s'execute sense error, prèviament hem d'haver
declarat la classe. Per a açò, en aqueix mateix fitxer hauràs de
incloure la classe posant alguna cosa com:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">require</span><span class="p">(</span><span class="s1">'Product.php'</span><span class="p">);</span>
</code></pre></div>
<p>Els atributs de una classe són similars a les variables de PHP. És
possible indicar un valor en la declaració de la classe. En aquest cas,
tots els objectes que s'instancien a partir de aqueixa classe, partiran
amb aqueix valor per defecte en l'atribut.</p>
<p>Per a accedir des d'un objecte als seus atributs o als mètodes de
la classe, has d'utilitzar l'operador fletxa (fixa't que només es posa
el símbol $ davant del nom de l'objecte):</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nv">$product</span><span class="o">-&gt;</span><span class="na">name</span> <span class="o">=</span> <span class="s1">'Samsung Galaxy S'</span><span class="p">;</span>
<span class="linenos" data-linenos="2 "></span><span class="k">echo</span> <span class="nv">$product</span><span class="o">-&gt;</span><span class="na">getSummaryLine</span><span class="p">();</span> 
</code></pre></div>
<h3 id="visibilitat">Visibilitat</h3>
<p>Quan es declara una propietat o un mètode, s'ha d'indicar el seu nivell d'accés (o visibilitat). Els
principals nivells són:</p>
<ul>
<li><code>public</code>. Els atributs declarats com <code>public</code> poden utilitzar-se
    directament per els objectes de la classe. És el cas de l'atribut
    <code>$name</code> anterior.</li>
<li><code>private</code>. Els atributs declarats com <code>private</code> només poden ser
    accedits i modificats per els mètodes definits en la classe, no
    directament per els objectes de la mateixa. És el cas de l'atribut
    <code>$code</code>.</li>
<li><code>protected</code>. Una propietat o mètode <code>protected</code> sols pot ser accedida per la classe on es defineix o per un subclasse. No és accessible des de fora.  </li>
</ul>
<p>Un dels motius per a crear atributs privats és que el seu valor forma
part de la informació interna de l'objecte i no ha de formar part de la
seua interfície. Un altre motiu és mantenir cert control sobre els seus
possibles valors. Per exemple, si no vols que es puga canviar lliurement
el valor del codi d'un producte. O necessites conèixer quin serà el nou
valor abans d'assignar-lo. En aquests casos, se solen definir aqueixos
atributs com a privats i a més es creen dins de la classe mètodes per a
permetre'ns obtenir i/o modificar els valors d'aqueixos atributs. Per
exemple:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">private</span> <span class="nx">string</span> <span class="nv">$code</span><span class="p">;</span>
<span class="linenos" data-linenos="2 "></span><span class="k">public</span> <span class="k">function</span> <span class="nf">setCode</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$newCode</span><span class="p">)</span><span class="o">:</span> <span class="nx">boolean</span> <span class="p">{</span>
<span class="linenos" data-linenos="3 "></span>    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">existsCode</span><span class="p">(</span><span class="nv">$newCode</span><span class="p">))</span> <span class="p">{</span>
<span class="linenos" data-linenos="4 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">code</span> <span class="o">=</span> <span class="nv">$newCode</span><span class="p">;</span>
<span class="linenos" data-linenos="5 "></span>        <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
<span class="linenos" data-linenos="6 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="7 "></span>    <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
<span class="linenos" data-linenos="8 "></span><span class="p">}</span>
<span class="linenos" data-linenos="9 "></span><span class="k">public</span> <span class="k">function</span> <span class="nf">getCode</span><span class="p">()</span><span class="o">:</span> <span class="nx">string</span> <span class="p">{</span> <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">code</span><span class="p">;</span> <span class="p">}</span>
</code></pre></div>
<p>Encara que no és obligatori, el nom del mètode que ens permet obtenir el
valor de un atribut sol començar per <code>get</code>, i el que ens permet
modificar-lo per <code>set</code>.</p>
<h2 id="constructor">Constructor</h2>
<p>Com ja has vist, per a instanciar objectes de una classe s'utilitza la
paraula <code>new</code>:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nv">$product</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Product</span><span class="p">();</span>
</code></pre></div>
<p>En PHP7 pots definir en les classes mètodes constructors, que s'executen
quan es crea l'objecte.</p>
<p>El constructor d'una classe ha d'anomenar-se <code>__construct</code>. Es poden utilitzar, per exemple, 
per assignar valors a atributs.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="k">class</span> <span class="nc">Product</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="k">private</span> <span class="nx">string</span> <span class="nv">$code</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span>    <span class="k">public</span> <span class="nx">string</span> <span class="nv">$name</span><span class="p">;</span>
<span class="linenos" data-linenos=" 5 "></span>
<span class="linenos" data-linenos=" 6 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">()</span>
<span class="linenos" data-linenos=" 7 "></span>    <span class="p">{</span>
<span class="linenos" data-linenos=" 8 "></span>      <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">code</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
<span class="linenos" data-linenos=" 9 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="10 "></span>    <span class="nx">…</span>
<span class="linenos" data-linenos="11 "></span><span class="p">}</span>
</code></pre></div>
<p>El constructor d'una classe pot cridar a altres mètodes o tenir
paràmetres, en aquest cas hauran de passar-se quan es crea l'objecte.
No obstant açò, només pot haver-hi un mètode constructor en cada classe.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">class</span> <span class="nc">Product</span> <span class="p">{</span>
<span class="linenos" data-linenos="2 "></span>    <span class="k">private</span> <span class="nx">string</span> <span class="nv">$code</span><span class="p">;</span>
<span class="linenos" data-linenos="3 "></span>    <span class="k">public</span> <span class="nx">string</span> <span class="nv">$name</span><span class="p">;</span>
<span class="linenos" data-linenos="4 "></span>    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$code</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="5 "></span>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="nv">$code</span> <span class="o">=</span> <span class="nv">$code</span><span class="p">;</span>
<span class="linenos" data-linenos="6 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="7 "></span>    <span class="o">...</span>
<span class="linenos" data-linenos="8 "></span><span class="p">}</span>
<span class="linenos" data-linenos="9 "></span><span class="nv">$product</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Product</span><span class="p">(</span><span class="s1">'GALAXYS'</span><span class="p">);</span>
</code></pre></div>
<p>Per exemple, si com en aquest exemple, definim un constructor en el qual
cal passar el codi, sempre que instancies un nou objecte d'aqueixa
classe hauràs de indicar el seu codi.</p>
<h2 id="la-pseuodovariable-this">La pseuodovariable $this</h2>
<p>Quan des d'un objecte s'invoca un mètode de la classe, a aquest se li
passa sempre una referència a l'objecte que ha fet la crida. Aquesta
referència s'emmagatzema en la pseudovariable <code>$this.</code> S'utilitza, per
exemple, en el codi anterior per a tenir accés als atributs privats de
l'objecte (que només són accessibles des dels mètodes de la classe).</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>echo "<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>" . $this-&gt;code . "<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>";
</code></pre></div>
<p>En la documentació de PHP tens més informació sobre els mètodes màgics:
<a href="http://es.php.net/manual/es/language.oop5.magic.php">http://es.php.net/manual/es/language.oop5.magic.php</a></p>
<h2 id="constants-de-classe">Constants de classe</h2>
<p>A més de mètodes i propietats, en una classe també es poden definir constants, 
utilitzant la paraula <code>const</code>. És important que no confongues els atributs amb
les constants. Són conceptes diferents: les constants no poden canviar el seu 
valor (òbviament, d'ahí el seu nom), no usen el caràcter <code>$</code>, s'escriuen en 
majúscules (per convenció) i el seu valor està associat a la classe, és a dir, 
no existeix una còpia del mateix en cada objecte. </p>
<p>Per tant, per a accedir a les constants d'una classe, s'ha d'utilitzar el 
nom de la classe i l'operador <code>::</code>, anomenat operador de resolució d'àmbit 
(que s'utilitza per a accedir a els elements de una classe).</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">class</span> <span class="nc">DB</span> <span class="p">{</span>
<span class="linenos" data-linenos="2 "></span>    <span class="k">const</span> <span class="no">USUARIO</span> <span class="o">=</span> <span class="s1">'dwes'</span><span class="p">;</span>
<span class="linenos" data-linenos="3 "></span>      <span class="o">...</span>
<span class="linenos" data-linenos="4 "></span><span class="p">}</span>
<span class="linenos" data-linenos="5 "></span><span class="k">echo</span> <span class="nx">DB</span><span class="o">::</span><span class="na">USUARIO</span><span class="p">;</span>
</code></pre></div>
<p>És important ressaltar que no és necessari que existisca cap objecte de
una classe per a poder accedir al valor de les constants que definisca.</p>
<div class="admonition important">
<p class="admonition-title">PHP-FIG</p>
<p>El PHP Framework Interop Group és un grup de treball on està involucrada gent que treballa en diferents <em>frameworks</em> amb
l'objectiu de posar en comú les tècniques que usen en els diferents projectes per poder integrar-les i compartir-les 
i poder treballar millor junts.</p>
</div>
<p>Les recomanacions <a href="https://www.php-fig.org/psr/psr-1/">PSR-1</a> i <a href="https://www.php-fig.org/psr/psr-12/">PSR-12</a> 
són recomanacions sobre l'estil de programació amb l'objectiu d'aplicar estandards comuns i 
així facilitar la lectura del codi realitzar per altres.</p>
<p>Algunes recomancions que cal seguir:</p>
<ol>
<li>Class names MUST be declared in <code>StudlyCaps</code>. For instance: <code>Product</code>.</li>
<li>Class constants MUST be declared in all upper case with underscore separators. For example: const IMAGE_PATH.      </li>
<li>About property names the only recommendation is to be consistent. So, we SHOULD use <code>$camelCase</code>. The same recommendations applies for variables.</li>
<li>Method names MUST be declared in <code>camelCase()</code>.</li>
</ol>
<p>Més informació en <a href="http://coppeldev.github.io/php/standards/psr-1.html">Estándares</a></p>
<h2 id="utilitzacio-dobjectes">Utilització d'objectes</h2>
<p>Ja saps com instanciar un objecte utilitzant <code>new</code>, i com accedir a els
seus mètodes i atributs públics amb l'operador fletxa:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nv">$product</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Product</span><span class="p">();</span>
<span class="linenos" data-linenos="2 "></span><span class="nv">$product</span><span class="o">-&gt;</span><span class="na">name</span><span class="o">=</span> <span class="s1">'Samsung Galaxy S'</span><span class="p">;</span>
<span class="linenos" data-linenos="3 "></span><span class="k">echo</span> <span class="nv">$product</span><span class="o">-&gt;</span><span class="na">getSummaryLine</span><span class="p">();</span>
</code></pre></div>
<p>Una vegada creat un objecte, pots utilitzar l'operador <code>instanceof</code> per
a comprovar si és o no una instància de una classe determinada.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">if</span> <span class="p">(</span><span class="nv">$product</span> <span class="nx">instanceof</span> <span class="nx">Product</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="2 "></span>        <span class="nx">…</span>
<span class="linenos" data-linenos="3 "></span><span class="p">}</span>
</code></pre></div>
<p>Des de PHP7, pots indicar en les funcions i mètodes de quina classe han
de ser els objectes que es passen com a paràmetres. Per a açò, has
d'especificar el tipus abans del paràmetre.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">public</span> <span class="k">function</span> <span class="nf">sellProduct</span><span class="p">(</span><span class="nx">Product</span> <span class="nv">$product</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="2 "></span>    <span class="nx">…</span>
<span class="linenos" data-linenos="3 "></span><span class="p">}</span>
</code></pre></div>
<p>Si quan es realitza la crida, el paràmetre no és del tipus adequat, es
produeix un error que podries capturar. </p>
<p>Una característica de la POO que has de tenir molt en compte és què
succeeix amb els objectes quan els passes a una funció, o simplement
quan executes un codi com el següent:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nv">$product1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Product</span><span class="p">();</span>
<span class="linenos" data-linenos="2 "></span><span class="nv">$product1</span><span class="o">-&gt;</span><span class="na">name</span> <span class="o">=</span> <span class="s1">'Samsung Galaxy S'</span><span class="p">;</span>
<span class="linenos" data-linenos="3 "></span><span class="nv">$product2</span> <span class="o">=</span> <span class="nv">$product1</span><span class="p">;</span>
</code></pre></div>
<p>El codi anterior simplement crearia un nou identificador del mateix objecte. Açò és,
quan s'utilitze qualsevol dels identificadors per a canviar el valor de algun atribut, aquest canvi es 
veuria també reflectit en accedir utilitzant l'altre identificador. Recorda que, encara que hi haja dos o
més identificadors del mateix objecte, en realitat tots es refereixen a l'única còpia que s'emmagatzema 
del mateix.</p>
<h2 id="comparacio-dobjectes">Comparació d'Objectes</h2>
<p>En utilitzar l'operador de comparació (==), es comparen d'una manera
senzilla les variables de cada objecte, és a dir: dues instàncies d'un
objecte són iguals si tenen els mateixos atributs i valors (els valors
es comparen amb ==), i són instàncies de la mateixa classe.</p>
<p>Quan s'utilitza l'operador identitat (===), les variables d'un objecte
són idèntiques si i només sí fan referència a la mateixa instància de
la mateixa classe.</p>
<h2 id="herencia">Herència</h2>
<p>L'herència és un mecanisme de la POO que ens permet definir noves
classes sobre la base d'una altra ja existent. Les noves classes que
hereten també es coneixen amb el nom de subclasses. La classe de la qual
hereten es diu classe base o superclasse.</p>
<p>Per exemple, en la nostra tenda web anem a tenir productes de diferents
tipus. En principi hem creat per a manejar-los una classe anomenada
<code>Product</code>, amb alguns atributs i un mètode que genera una eixida
personalitzada en format HTML del codi.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">class</span> <span class="nc">Product</span> <span class="p">{</span>
<span class="linenos" data-linenos="2 "></span>   <span class="k">public</span> <span class="nx">string</span> <span class="nv">$code</span><span class="p">;</span>
<span class="linenos" data-linenos="3 "></span>   <span class="k">public</span> <span class="nx">string</span> <span class="nv">$name</span><span class="p">;</span>    
<span class="linenos" data-linenos="4 "></span>  <span class="o">...</span>       
<span class="linenos" data-linenos="5 "></span>   <span class="k">public</span> <span class="k">function</span> <span class="nf">show</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos="6 "></span>      <span class="k">echo</span> <span class="s2">"&lt;p&gt;"</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">code</span> <span class="o">.</span> <span class="s2">"&lt;/p&gt;"</span><span class="p">;</span>
<span class="linenos" data-linenos="7 "></span>   <span class="p">}</span>
<span class="linenos" data-linenos="8 "></span><span class="p">}</span>
</code></pre></div>
<p>Aquesta classe és molt útil si l'única informació que tenim dels
diferents productes és la que es mostra dalt. Però, si vols
personalitzar la informació que vas a tractar de cada tipus de producte
(i emmagatzemar, per exemple per als televisors, les polzades que tenen
o la seua tecnologia de fabricació), pots crear noves classes que
hereten de <code>Product</code>. Per exemple, <code>TV</code>, <code>Computer</code>, <code>Phone</code>.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">class</span> <span class="nc">TV</span> <span class="k">extends</span> <span class="nx">Product</span> <span class="p">{</span>
<span class="linenos" data-linenos="2 "></span>    <span class="k">public</span> <span class="nx">float</span> <span class="nv">$size</span><span class="p">;</span>
<span class="linenos" data-linenos="3 "></span>    <span class="k">public</span> <span class="nx">string</span> <span class="nv">$technology</span><span class="p">;</span>
<span class="linenos" data-linenos="4 "></span><span class="p">}</span>
</code></pre></div>
<h3 id="la-paraula-reservada-extends">La paraula reservada <code>extends</code></h3>
<p>Com pots veure, per a definir una classe que herete d'una altra,
simplement has de utilitzar la paraula <code>extends</code> indicant la superclasse. </p>
<p>Els nous objectes que s'instancien a partir de la subclasse 
són també objectes de la classe base; es pot comprovar utilitzant l'operador <code>instanceof</code>.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nv">$tv</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TV</span><span class="p">();</span>
<span class="linenos" data-linenos="2 "></span><span class="k">if</span> <span class="p">(</span><span class="nv">$tv</span> <span class="nx">instanceof</span> <span class="nx">Product</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="3 "></span>  <span class="c1">// Aquest codi s'executa doncs la condició és certa</span>
<span class="linenos" data-linenos="4 "></span>        <span class="nx">…</span>
<span class="linenos" data-linenos="5 "></span><span class="p">}</span>
</code></pre></div>
<p>La nova classe hereta tots els atributs i mètodes públics de la classe
base, però no els privats. Si vols crear en la classe base un mètode no
visible a l'exterior (com els privats) que s'herete a les subclasses,
has d'utilitzar la paraula <strong>protected</strong> en lloc de <strong>private</strong>. A més, pots
redefinir el comportament dels mètodes existents en la classe base,
simplement creant en la subclasse un nou mètode amb el mateix nom.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">class</span> <span class="nc">TV</span> <span class="k">extends</span> <span class="nx">Producte</span> <span class="p">{</span> 
<span class="linenos" data-linenos="2 "></span>   <span class="k">public</span> <span class="nx">float</span> <span class="nv">$size</span><span class="p">;</span>
<span class="linenos" data-linenos="3 "></span>   <span class="k">public</span> <span class="nx">string</span> <span class="nv">$technology</span><span class="p">;</span>
<span class="linenos" data-linenos="4 "></span>
<span class="linenos" data-linenos="5 "></span>   <span class="k">public</span> <span class="k">function</span> <span class="nf">show</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos="6 "></span>      <span class="k">print</span> <span class="s2">"&lt;p&gt;"</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">size</span> <span class="o">.</span> <span class="s2">" polzades&lt;/p&gt;"</span><span class="p">;</span>
<span class="linenos" data-linenos="7 "></span>   <span class="p">}</span>
<span class="linenos" data-linenos="8 "></span><span class="p">}</span>
</code></pre></div>
<h2 id="bibliografia">Bibliografia</h2>
<ul>
<li>José Luis Comesaña.  <em>Apuntes de formación a distancia del módulo
    «Desarrollo web en entorno servidor» del CFGS DAW, elaborados y
    licenciados por el Ministerio de Educación, Cultura y Deporte.</em> [en
    línia]. 2012 [data de consulta: 13 de setembre de 2019].
    Disponible en
    &lt;<a href="https://github.com/statickidz/TemarioDAW/tree/master/DWES">https://github.com/statickidz/TemarioDAW/tree/master/DWES</a>&gt;</li>
<li>Antonio López. <em>Learning PHP 7.</em> Packt Publishing (29 de marzo de
    2016) .</li>
</ul>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Anterior: 2.- El llenguatge PHP" class="md-footer__link md-footer__link--prev" href="../../02-phpbasics/" rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</div>
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Anterior
              </span>
              2.- El llenguatge PHP
            </div>
</div>
</a>
<a aria-label="Següent: PHP OO Avançat" class="md-footer__link md-footer__link--next" href="../0302-phpoo-advanced/" rel="next">
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Següent
              </span>
              PHP OO Avançat
            </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
            2021-2022 Vicent Jordà - Licencia CC BY-NC-SA
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
          Material for MkDocs
        </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../..", "features": ["toc.integrate"], "translations": {"clipboard.copy": "C\u00f2pia al porta-retalls", "clipboard.copied": "Copiat al porta-retalls", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Cerca", "search.result.placeholder": "Escriu per a comen\u00e7ar a cercar", "search.result.none": "Cap document coincideix", "search.result.one": "1 document coincident", "search.result.other": "# documents coincidents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.409db549.min.js", "version": null}</script>
<script src="../../assets/javascripts/bundle.756773cc.min.js"></script>
<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
<script>mermaid.initialize({});</script></body>
</html>