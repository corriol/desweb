
<!DOCTYPE html>

<html class="no-js" lang="ca">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.2.2, mkdocs-material-7.2.6" name="generator"/>
<title>2.- El llenguatge PHP - DWES</title>
<link href="../assets/stylesheets/main.802231af.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.3f5d1f46.min.css" rel="stylesheet"/>
<meta content="#ff6e42" name="theme-color"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
<link href="../stylesheets/extra.css" rel="stylesheet"/>
</head>
<body data-md-color-accent="" data-md-color-primary="deep-orange" data-md-color-scheme="" dir="ltr">
<script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#el-llenguatge-php">
          Salta el contingut
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="DWES" class="md-header__button md-logo" data-md-component="logo" href=".." title="DWES">
<img alt="logo" src="../assets/logo.png"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            DWES
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              2.- El llenguatge PHP
            
          </span>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Cerca" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Cerca" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--integrated" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="DWES" class="md-nav__button md-logo" data-md-component="logo" href=".." title="DWES">
<img alt="logo" src="../assets/logo.png"/>
</a>
    DWES
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="..">
        Inici
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../01-intro/">
        1.- Introducció a la programació Web
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          2.- El llenguatge PHP
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        2.- El llenguatge PHP
      </a>
<nav aria-label="Taula de continguts" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Taula de continguts
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#introduccio">
    Introducció
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#funcionament-i-estructura-basica">
    Funcionament i estructura bàsica
  </a>
<nav aria-label="Funcionament i estructura bàsica" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#el-nostre-primer-codi-php">
    El nostre primer codi PHP
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#comentaris">
    Comentaris
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#codi-incrustat">
    Codi incrustat
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#variables-i-tipus-de-dades">
    Variables i tipus de dades
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#constants">
    Constants
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#operadors">
    Operadors
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#arimetics">
    Arimètics
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#comparacio">
    Comparació
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#logics">
    Lògics
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#assignacio">
    Assignació
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#estructures-de-control-de-flux">
    Estructures de control de flux
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#maneig-de-cadenes-de-text">
    Maneig de cadenes de text
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#maneig-de-dates">
    Maneig de dates
  </a>
<nav aria-label="Maneig de dates" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#funcio-time">
    Funció time()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#funcio-date">
    Funció date()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#funcio-mktimehora-min-seg-mes-dia-any">
    Funció mktime(hora, min, seg, mes, dia, any)
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#operar-amb-dates">
    Operar amb dates
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#validar-dates">
    Validar dates
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#classe-datetime">
    Classe DateTime
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#maneig-darrays">
    Maneig d'arrays
  </a>
<nav aria-label="Maneig d'arrays" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#array-indexat">
    Array indexat
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#arrays-associatius">
    Arrays associatius
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#arrays-multidimensionals">
    Arrays multidimensionals
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#funcions-darrays">
    Funcions d'arrays
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#funcions">
    Funcions
  </a>
<nav aria-label="Funcions" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#funcions-predefinides">
    Funcions predefinides
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#funcions-definides-per-lusuari">
    Funcions definides per l'usuari
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#valors-per-defecte-en-els-parametres">
    Valors per defecte en els paràmetres
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pas-de-parametres-per-referencia">
    Pas de paràmetres per referència
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#noves-caracterisques-php-7">
    Noves caracterísques PHP 7
  </a>
<nav aria-label="Noves caracterísques PHP 7" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#spaceship-operator">
    Spaceship operator  (&lt;==&gt;)
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#operador-de-fusio-de-null">
    Operador de fusió de null ??
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#processament-de-formularis">
    Processament de formularis
  </a>
<nav aria-label="Processament de formularis" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#que-es-una-peticio-http">
    Què és una petició HTTP?
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#metode-get">
    Mètode GET
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#definicio-de-formularis">
    Definició de formularis
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#accedir-a-les-dades-de-la-peticio-post">
    Accedir a les dades de la petició POST
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#validacio-de-formularis">
    Validació de formularis
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#comprovar-la-data">
    Comprovar la data
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#bones-practiques-en-lobtencio-de-dades-des-de-lexterior">
    Bones pràctiques en l’obtenció de dades des de l’exterior
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sentencies-per-a-incloure-fitxers">
    Sentències per a incloure Fitxers
  </a>
<nav aria-label="Sentències per a incloure Fitxers" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#ambit-de-les-variables_1">
    Àmbit de les variables
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#rutes">
    Rutes
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pujada-de-fitxers">
    Pujada de fitxers
  </a>
<nav aria-label="Pujada de fitxers" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#formulari">
    Formulari
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#variable-superglobal-_files">
    Variable superglobal $_FILES
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#moure-el-fitxer">
    Moure el fitxer
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#gestio-derrors">
    Gestió d'errors
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#activitats">
    Activitats
  </a>
<nav aria-label="Activitats" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#cadenes">
    Cadenes
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#arrays-indexats">
    Arrays indexats
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#arrays-multidimensionals_1">
    Arrays multidimensionals
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#funcions_1">
    Funcions
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#formularis">
    Formularis
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#inclusio-de-fitxers">
    Inclusió de fitxers
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pujada-de-fitxers_1">
    Pujada de fitxers
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#credits">
    Crèdits
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4">
        3.- PHP Orientat a Objectes
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="3.- PHP Orientat a Objectes" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
          3.- PHP Orientat a Objectes
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../03-phpoo/0301-phpoo-basic/">
        PHP OO Bàsic
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../03-phpoo/0302-phpoo-advanced/">
        PHP OO Avançat
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../03-phpoo/0303-errorhandling/">
        Erros i excepcions
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../03-phpoo/0399-activities/">
        Activitats
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5">
        4.- Accés a dades amb PHP
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="4.- Accés a dades amb PHP" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
          4.- Accés a dades amb PHP
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../04-data-access/04-data-access-php/">
        Accés a dades amb PHP
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6">
        5.- Manteniment de l'estat
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="5.- Manteniment de l'estat" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
          5.- Manteniment de l'estat
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../05-maintain-state/05-01-intro/">
        Introducció
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../05-maintain-state/05-02-cookies/">
        Galletes (cookies)
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../05-maintain-state/05-03-sessions/">
        Sessions
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../05-maintain-state/05-04-best-practices/">
        Bones pràctiques
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../05-maintain-state/05-99-activities/">
        Activitats
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7">
        6.- Composer. Introducció al testing
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="6.- Composer. Introducció al testing" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
          6.- Composer. Introducció al testing
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../06-composer/06-01-intro/">
        Introducció
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../06-composer/06-02-composer/">
        Composer
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../06-composer/06-04-namespaces/">
        Namespaces
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../06-composer/06-05-tdd-intro/">
        Introducció al testing
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../06-composer/06-99-activities/">
        Activitats
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" id="__nav_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_8">
        7.- Miniframework MVC
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="7.- Miniframework MVC" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
          7.- Miniframework MVC
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../07-mvc/07-00-intro/">
        Introducció
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../07-mvc/07-01-controlador-frontal/">
        Controlador frontal
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../07-mvc/07-02-classe-router/">
        Rutes i controladors
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../07-mvc/07-03-classe-request-response/">
        Sol·licitud i resposta
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" id="__nav_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_9">
        8.- Symfony
        <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="8.- Symfony" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_9">
<span class="md-nav__icon md-icon"></span>
          8.- Symfony
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../08-symfony/01-introducci%C3%B3-va/">
        Introducció a Symfony
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../08-symfony/02-mvc/">
        El patró MVC en Symfony
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../08-symfony/03-twig/">
        El motor de plantilles Twig
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../08-symfony/04-injeccio-dependencies/">
        Injecció de dependències
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../08-symfony/05-doctrine/">
        Doctrine
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../08-symfony/11-relacions-molts-a-molts/">
        Doctrine. Relacions molts a molts
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../08-symfony/06-formularis-i-validaci%C3%B3/">
        Formularis i validació
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../08-symfony/07-seguretat-control-acces/">
        Seguretat i control d'acciés
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../08-symfony/08-repositoris-paginacio/">
        Repositoris i paginació
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../08-symfony/09-altres-funcionalitats/">
        Altres funcionalitats
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../08-symfony/10-pujada-de-fitxers/">
        Pujada de fitxers
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../08-symfony/14-fixtures-bundle/">
        Doctrine Fixtures Bundle
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../08-symfony/99-activitats/">
        Activitats
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="el-llenguatge-php">El llenguatge PHP</h1>
<div class="admonition important">
<p class="admonition-title">Objectius</p>
<ul>
<li>Conèixer la sintaxi bàsica de PHP i les noves característiques de PHP 7.</li>
<li>Entendre com s'integren PHP i HTML.</li>
<li>Descriure els tipus de dades existents en PHP.</li>
<li>Fer servir les estructures de control bàsiques.</li>
<li>Aprendre a utilitzar els arrays associatius.</li>
<li>Conèixer els mecanismes de pas de paràmetres a un script.</li>
<li>Processar i validar formularis</li>
<li>Incloure fixters</li>
</ul>
</div>
<h2 id="introduccio">Introducció</h2>
<ul>
<li>Acrònim de <em>Personal Home Page</em></li>
<li>Llenguatge de propòsit general, encara que el seu fort és el desenvolupament web.</li>
<li>Sintaxi similar a C / Java</li>
<li>El codi s'executa en el servidor (en Apache mitjançant <em>mod_php</em>)</li>
<li>El client rep el resultat generat després d'interpretar el codi al servidor.</li>
<li>El codi s'emmagatzema en arxiu amb extensió <code>.php.</code></li>
</ul>
<p>L'última versió és la 8.0, de novembre de 2020 (i en breu tindrem la versió 8.1). La versió 7.0 va sortir al desembre de 2015. A més de nombroses noves funcionalitats que anirem veient durant el curs, té més de dues vegades millor rendiment que PHP5. </p>
<div class="admonition important">
<p class="admonition-title">PHP 7.4</p>
<p>Nosaltres farem ús de la versió 7.4 de PHP</p>
</div>
<p>La seva documentació és extensa i està traduïda: https://www.php.net/manual/es/. </p>
<h2 id="funcionament-i-estructura-basica">Funcionament i estructura bàsica</h2>
<h3 id="el-nostre-primer-codi-php">El nostre primer codi PHP</h3>
<ul>
<li>El codi PHP sempre va entre els simbolos <code>&lt;?php</code> i <code>?&gt;</code>.</li>
<li>Les instruccions PHP acaben sempre amb <code>;</code>.</li>
<li>Per a generar codi HTML des de PHP podem utilitzar el mètode <code>echo</code> passant-li el text del codi que volem generar.</li>
<li>El codi pot anar entre les etiquetes d'HTML.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="2 "></span><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="3 "></span><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="4 "></span>    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="s2">"Hola món"</span> <span class="cp">?&gt;</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="5 "></span><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</code></pre></div>
<ul>
<li>També podem utilitzar l'etiqueta <strong>&lt;?=</strong> fa el echo al mateix temps.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="2 "></span><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="3 "></span><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="4 "></span>    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="cp">&lt;?</span><span class="o">=</span> <span class="s2">"Hola món"</span> <span class="cp">?&gt;</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="5 "></span><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</code></pre></div>
<h3 id="comentaris">Comentaris</h3>
<ul>
<li>De bloc entre <code>/*</code> i <code>*/</code>.</li>
<li>De linea, començant per <code>//</code> o per <code>#</code>.</li>
</ul>
<h3 id="codi-incrustat">Codi incrustat</h3>
<p>El documents que contenen codi PHP s'han d'anomenar amb l'extensió <strong>.php</strong></p>
<h3 id="variables-i-tipus-de-dades">Variables i tipus de dades</h3>
<p>Una de les característiques de php és que és un llenguatge <strong>no fortament tipat</strong>. 
De fet no cal declarar la variable ni indicar el tipus de dades si la declare. 
Encara que si volem codi de qualitat ho hauriem de fer.</p>
<h4 id="declaracio">Declaració</h4>
<ul>
<li>Els noms de les variables sempre comencen per <code>$</code> </li>
<li>Després del $ els noms de les variables han d'anar seguits per una lletra o el caràcter <code>_</code> i poden contenir també números. </li>
<li>No és necessari declarar una variable ni especificar-li un tipus (sencer, cadena,...) concret.</li>
</ul>
<p>Per crear una variable que continga el text a generar i mostrar-la:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 2 "></span><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 3 "></span><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 4 "></span>    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 5 "></span>    <span class="cp">&lt;?php</span> 
<span class="linenos" data-linenos=" 6 "></span>        <span class="nv">$salutacio</span> <span class="o">=</span> <span class="s2">"Hola món"</span><span class="p">;</span>
<span class="linenos" data-linenos=" 7 "></span>        <span class="k">echo</span> <span class="nv">$salutacio</span><span class="p">;</span> 
<span class="linenos" data-linenos=" 8 "></span>    <span class="cp">?&gt;</span>
<span class="linenos" data-linenos=" 9 "></span>    <span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="10 "></span><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</code></pre></div>
<h4 id="tipus-de-les-variables">Tipus de les variables</h4>
<ul>
<li>El tipus de la variable es decideix en funció del context en què s'utilitze.</li>
<li>En assignar-li el valor 7, la variable és de tipus “sencer” </li>
</ul>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nv">$la_meua_variable</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>  <span class="c1">// ara és un número</span>
<span class="linenos" data-linenos="2 "></span><span class="nv">$la_meua_variable</span> <span class="o">=</span> <span class="s2">"set"</span><span class="p">;</span> <span class="c1">// ara és cadena</span>
</code></pre></div>
<p>Si li canviem el contingut passa a ser de tipus “cadena”</p>
<h5 id="variable-no-inicialitzades">Variable no inicialitzades</h5>
<p>Si s'intenta utilitzar una variable abans d'assignar-li un valor, es genera un error de tipus <strong>E_NOTICE</strong> però no s'interromp l'execució de l'script. L'eixida mostrarà un avís cada volta que s'intente.</p>
<h4 id="tipus-de-dades-en-php">Tipus de dades en PHP</h4>
<ul>
<li>booleà (<strong>boolean</strong>). Els seus possibles valors són true i false. A més, qualsevol nombre enter es considera com true, excepte el 0 que és false.</li>
<li>sencer (<strong>integer</strong>). Qualsevol nombre sense decimals. Es poden representar en format decimal, octal (començant per un 0), o hexadecimal (començant per 0x).</li>
<li>real (<strong>float</strong>). Qualsevol nombre amb decimals. Es poden representar també en notació científica.</li>
<li>cadena (<strong>string</strong>). Conjunts de caràcters delimitats per cometes simples o dobles.</li>
<li>vector (<strong>array</strong>). Conjunt de variables del mateix tipus ordenades.</li>
<li>Objecte (<strong>object</strong>). Utilitzat per les instàncies de classes.</li>
<li><strong>null</strong>. És un tipus de dades especial, que s'usa per a indicar que la variable no té valor. (<a href="http://php.net/manual/es/language.types.null.php">http://php.net/manual/es/language.types.null.php</a>)</li>
</ul>
<h4 id="ambit-de-les-variables">Àmbit de les variables</h4>
<p>L'àmbit d'una variable és la part del codi en que és visible. 
Una variable declarada en un fitxer de PHP està disponible en eixe fitxer i en els que l'incloguen. 
Les funcions definixen un àmbit local, separat de la resta del codi.
Es poden definir variables globlals amb la paraula reservada <strong>global</strong>, encara que no són aconsellables.</p>
<h4 id="variables-predefinides">Variables predefinides</h4>
<p>Són variables internes predefinides de PHP que poden usar-se des de qualsevol àmbit. Tomem forma <strong>d'arrays associatius</strong> que contenen un conjunt de valors.</p>
<ul>
<li><strong>$_SERVER</strong>. Conté informació sobre l'entorn del servidor web i d'execució.</li>
<li><strong>$_GET, $_POST i $_COOKIE</strong> contenen les variables que s'han passat al
script actual utilitzant, respectivament, els mètodes GET (paràmetres en la URL), HTTP POST i Cookies HTTP </li>
<li><strong>$_REQUEST</strong> junta en un solament el contingut dels tres *arrays anteriors,
$_GET, $_POST i $_COOKIE. </li>
<li><strong>$_ENV</strong> conté les variables que es puguen haver passat a PHP des de l'entorn en què s'executa. </li>
<li><strong>$_FILES</strong> conté els fitxers que es puguen haver pujat al servidor
utilitzant el mètode POST. </li>
<li><strong>$_SESSION</strong> conté les variables de sessió disponibles per al guió
actual.</li>
</ul>
<p><a href="http://es.php.net/manual/es/language.variables.superglobals.php">http://es.php.net/manual/es/language.variables.superglobals.php</a></p>
<h3 id="constants">Constants</h3>
<p>Per a definir constants s'utilitza <strong>define()</strong>, que reb el nom de la constant i el valor que li volem donar</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nb">define</span><span class="p">(</span><span class="s2">"LIMITE"</span><span class="p">,</span><span class="mi">1000</span><span class="p">);</span>
</code></pre></div>
<p>És habitual utilitzar identificadors en majuscules per a les constants.</p>
<h3 id="operadors">Operadors</h3>
<h3 id="arimetics">Arimètics</h3>
<table>
<thead>
<tr>
<th>Exemple</th>
<th>Nom</th>
<th>Resultat</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>+$a</code></td>
<td>Identidat</td>
<td>Conversió de <code>$a</code> a <code>int</code> o <code>float</code> segons el cas.</td>
</tr>
<tr>
<td><code>-$a</code></td>
<td>Negació</td>
<td>Oposat de <code>$a</code>.</td>
</tr>
<tr>
<td><code>$a + $b</code></td>
<td>Suma</td>
<td>Suma de <code>$a</code> i <code>$b</code>.</td>
</tr>
<tr>
<td><code>$a - $b</code></td>
<td>Resta</td>
<td>Diferència de <code>$a</code> i <code>$b</code>.</td>
</tr>
<tr>
<td><code>$a * $b</code></td>
<td>Multiplicació</td>
<td>Producte de <code>$a</code> i <code>$b</code>.</td>
</tr>
<tr>
<td><code>$a / $b</code></td>
<td>Divisió</td>
<td>Quocient de <code>$a</code> i <code>$b</code>.</td>
</tr>
<tr>
<td><code>$a % $b</code></td>
<td>Módul / Residu</td>
<td>Residu de <code>$a</code> dividit per <code>$b</code>.</td>
</tr>
<tr>
<td><code>$a ** $b</code></td>
<td>Potència</td>
<td>Resultat de <code>$a</code> elevat a <code>$b</code>. PHP &gt;= 5.6.</td>
</tr>
</tbody>
</table>
<p>En el caso de <strong>cadenas</strong>, si queremos concatenarlas, se utiliza el operador <code>.</code>:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nv">$x</span> <span class="o">=</span> <span class="mi">33</span><span class="p">;</span>
<span class="linenos" data-linenos="2 "></span><span class="nv">$y</span> <span class="o">=</span> <span class="mi">11</span><span class="p">;</span>
<span class="linenos" data-linenos="3 "></span><span class="nv">$z</span> <span class="o">=</span> <span class="nv">$x</span> <span class="o">+</span> <span class="nv">$y</span><span class="p">;</span>
<span class="linenos" data-linenos="4 "></span><span class="k">echo</span> <span class="s2">"La suma de 33 y 11 es "</span><span class="o">.</span><span class="mf">44.</span><span class="s2">"&lt;br /&gt;"</span><span class="p">;</span>
<span class="linenos" data-linenos="5 "></span><span class="k">echo</span> <span class="s2">"La suma de "</span><span class="o">.</span><span class="nv">$x</span><span class="o">.</span><span class="s2">" y "</span><span class="o">.</span><span class="nv">$y</span><span class="o">.</span><span class="s2">" es "</span><span class="o">.</span><span class="p">(</span><span class="mi">33</span> <span class="o">+</span> <span class="mi">11</span><span class="p">)</span><span class="o">.</span><span class="s2">"&lt;br /&gt;"</span><span class="p">;</span>
<span class="linenos" data-linenos="6 "></span><span class="k">echo</span> <span class="s2">"La suma de "</span><span class="o">.</span><span class="nv">$x</span><span class="o">.</span><span class="s2">" y "</span><span class="o">.</span><span class="nv">$y</span><span class="o">.</span><span class="s2">" es "</span><span class="o">.</span><span class="nv">$z</span><span class="o">.</span><span class="s2">"&lt;br /&gt;"</span><span class="p">;</span>
</code></pre></div>
<p>Realment en lloc de concatenar cadenas con variables, podem imprimir-les directament 
ja que s'expandeixen automàticament:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">echo</span> <span class="s2">"La suma de </span><span class="si">$x</span><span class="s2"> y </span><span class="si">$y</span><span class="s2"> es </span><span class="si">$z</span><span class="s2"> &lt;br /&gt;"</span><span class="p">;</span>
</code></pre></div>
<p>En ocasions, necesitem envoltar el nom de la variable entre claus per poder un més text al resultat:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nv">$color</span> <span class="o">=</span> <span class="s2">"rojo"</span><span class="p">;</span>
<span class="linenos" data-linenos="2 "></span><span class="k">echo</span> <span class="s2">"El plural de </span><span class="si">$color</span><span class="s2"> el </span><span class="si">${</span><span class="nv">color</span><span class="si">}</span><span class="s2">s"</span><span class="p">;</span>
<span class="linenos" data-linenos="3 "></span><span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
<p>Més endavant estudiarem algunes funcions per al tractament de cadenes.</p>
<h3 id="comparacio">Comparació</h3>
<table>
<thead>
<tr>
<th>Exemple</th>
<th>Nom</th>
<th>Resultat</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$a == $b</code></td>
<td>Igual</td>
<td><code>true</code> si <code>$a</code> és igual a <code>$b</code> després de la conversió de tipus.</td>
</tr>
<tr>
<td><code>$a === $b</code></td>
<td>Idèntic, Comparació estricta</td>
<td><code>true</code> si <code>$a</code> és igual a <code>$b</code>, i són del mateix tipus de dada.</td>
</tr>
<tr>
<td><code>$a != $b</code>, <code>$a &lt;&gt; $b</code></td>
<td>Diferent</td>
<td><code>true</code> si <code>$a</code> no és igual a <code>$b</code> després de la conversió de tipus.</td>
</tr>
<tr>
<td><code>$a !== $b</code></td>
<td>No idèntic</td>
<td><code>true</code> si <code>$a</code> no és igual a <code>$b</code>, o si no són del mateix tipus.</td>
</tr>
<tr>
<td><code>$a &lt; $b</code></td>
<td>Menor que</td>
<td><code>true</code> si <code>$a</code> és estrictament menor que <code>$b</code>.</td>
</tr>
<tr>
<td><code>$a &gt; $b</code></td>
<td>Major que</td>
<td><code>true</code> si <code>$a</code> és estrictament major que <code>$b</code>.</td>
</tr>
<tr>
<td><code>$a &lt;= $b</code></td>
<td>Menor o igual que</td>
<td><code>true</code> si <code>$a</code> és menor o igual que <code>$b</code>.</td>
</tr>
<tr>
<td><code>$a &gt;= $b</code></td>
<td>Major o igual que</td>
<td><code>true</code> si <code>$a</code> és major o igual que <code>$b</code>.</td>
</tr>
<tr>
<td><code>$a &lt;=&gt; $b</code></td>
<td>Nau espacial</td>
<td>Torna <code>-1</code>, <code>0</code> o <code>1</code> quan <code>$a</code> és respectivamente menor, igual, o major que <code>$b</code>. PHP &gt;= 7.</td>
</tr>
<tr>
<td><code>$a ?? $b ?? $c</code></td>
<td>Fusión de <em>null</em></td>
<td>El primer operano d'esquerra a dreta que existisca i no siga <code>null</code>. <code>null</code> si no hi ha valors definits i no són <code>null</code>. PHP &gt;= 7.</td>
</tr>
</tbody>
</table>
<h3 id="logics">Lògics</h3>
<table>
<thead>
<tr>
<th>Exemple</th>
<th>Nom</th>
<th>Resultat</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$a and $b</code>, <code>$a &amp;&amp; $b</code></td>
<td><em>And</em> (i)</td>
<td><code>true</code> si tant <code>$a</code> com <code>$b</code> són <code>true</code>.</td>
</tr>
<tr>
<td><code>$a or $b</code>, <code>$a || $b</code></td>
<td><em>Or</em> (o inclusiu)</td>
<td><code>true</code> si qualsevol de <code>$a</code> o <code>$b</code> és <code>true</code>.</td>
</tr>
<tr>
<td><code>$a xor $b</code></td>
<td><em>Xor</em> (o exclusiu)</td>
<td><code>true</code> si <code>$a</code> o <code>$b</code> és <code>true</code>, pero no ambdós.</td>
</tr>
<tr>
<td><code>!$a</code></td>
<td><em>Not</em> (no)</td>
<td><code>true</code> si <code>$a</code> no és <code>true</code>.</td>
</tr>
</tbody>
</table>
<h3 id="assignacio">Assignació</h3>
<table>
<thead>
<tr>
<th>Exemple</th>
<th>Nom</th>
<th>Resultat</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$a = $b</code></td>
<td>Assignació</td>
<td>Assigna a <code>$a</code> el valor de <code>$b</code></td>
</tr>
<tr>
<td><code>$a += $b</code></td>
<td>Assignació de la suma</td>
<td>Le suma a <code>$a</code> el valor de <code>$b</code>. Equivalent a <code>$a = $a + $b</code></td>
</tr>
<tr>
<td><code>$a -= $b</code></td>
<td>Assignació de la resta</td>
<td>Le resta a <code>$a</code> el valor de <code>$b</code>. Equivalent a <code>$a = $a - $b</code></td>
</tr>
<tr>
<td><code>$a *= $b</code></td>
<td>Assignació del producte</td>
<td>Assigna a <code>$a</code> el producto de <code>$a</code> por <code>$b</code>. Equivalent a <code>$a = $a * $b</code></td>
</tr>
<tr>
<td><code>$a /= $b</code></td>
<td>Assignació de la divisió</td>
<td>Assigna a <code>$a</code> el quocient de <code>$a</code> entre <code>$b</code>. Equivalent a <code>$a = $a / $b</code></td>
</tr>
<tr>
<td><code>$a %= $b</code></td>
<td>Assignació del residu</td>
<td>Assigna a <code>$a</code> el residu de dividir <code>$a</code> entre <code>$b</code>. Equivalent a <code>$a = $a % $b</code></td>
</tr>
<tr>
<td><code>$a .= $b</code></td>
<td>Concatenació</td>
<td>Concatena a <code>$a</code> la cadena <code>$b</code>. Equivalent a <code>$a = $a . $b</code></td>
</tr>
<tr>
<td><code>$a++</code></td>
<td>Increment</td>
<td>Incrementa <code>$a</code> en una unitat. Equivalent a <code>$a = $a + 1</code></td>
</tr>
<tr>
<td><code>$a--</code></td>
<td>Decrement</td>
<td>Decrementa <code>$a</code> en una unitat. Equivalent a <code>$a = $a - 1</code></td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Prioridad de los operadores</p>
<p>Recorda la prioritat. Primer els parèntesis, després la negació (<code>!</code>), productes/divisions, sumes/restes, comparacions, lògics i finalment es realitza l'assignació.
Més informació a <a href="https://www.php.net/manual/es/language.operators.precedence.php">https://www.php.net/manual/es/language.operators.precedence.php</a></p>
</div>
<div class="admonition question">
<p class="admonition-title">Autoevaluación</p>
<p>Si <code>$a=5</code> i <code>$b=4</code>, esbrina el valor de <code>$c</code> si <code>$c = $a*2 &gt; $b+5 &amp;&amp; !($b&lt;&gt;4)</code></p>
</div>
<h4 id="operador-ternari">Operador ternari</h4>
<p>Funciona com un condicional <strong>condició ? valor si true : valor si false</strong> i que es pot simplificar ** condició  </p>
<p><a href="https://www.php.net/manual/es/language.operators.php">https://www.php.net/manual/es/language.operators.php</a></p>
<p>Farem alguns <strong>exercicis</strong>: <a href="2.0.Activitat.md">Exercisi 2.0 Conceptes bàsics</a></p>
<h2 id="estructures-de-control-de-flux">Estructures de control de flux</h2>
<ul>
<li>
<p>Les instruccions de control de flux en PHP funcionen exactament igual que en altres llenguatges de programació.</p>
</li>
<li>
<p>Les més habituals són:</p>
</li>
<li>
<p>Condicionals: if, if else, switch </p>
</li>
<li>Bucles: while, do while, for</li>
</ul>
<p>seguint les estructures:</p>
<p><div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">if</span> <span class="p">(</span><span class="nx">condició</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="2 "></span>    <span class="c1">// instruccions</span>
<span class="linenos" data-linenos="3 "></span><span class="p">}</span>
<span class="linenos" data-linenos="4 "></span><span class="k">else</span> <span class="p">{</span>
<span class="linenos" data-linenos="5 "></span>    <span class="c1">// instruccions</span>
<span class="linenos" data-linenos="6 "></span><span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="k">switch</span> <span class="p">(</span><span class="nv">$variable</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 2 "></span>    <span class="k">case</span> <span class="nx">valor</span><span class="o">:</span>
<span class="linenos" data-linenos=" 3 "></span>        <span class="c1">//instruccio1</span>
<span class="linenos" data-linenos=" 4 "></span>        <span class="k">break</span><span class="p">;</span>
<span class="linenos" data-linenos=" 5 "></span>    <span class="k">case</span> <span class="nx">valor</span><span class="o">:</span>
<span class="linenos" data-linenos=" 6 "></span>        <span class="c1">//instruccio1</span>
<span class="linenos" data-linenos=" 7 "></span>        <span class="k">break</span><span class="p">;</span>
<span class="linenos" data-linenos=" 8 "></span>    <span class="k">default</span><span class="o">:</span>
<span class="linenos" data-linenos=" 9 "></span>        <span class="c1">//instruccio1</span>
<span class="linenos" data-linenos="10 "></span><span class="p">}</span>           
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">while</span> <span class="p">(</span><span class="nx">condició</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="2 "></span>    <span class="c1">//instruccions</span>
<span class="linenos" data-linenos="3 "></span><span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">do</span> <span class="p">{</span>
<span class="linenos" data-linenos="2 "></span>    <span class="c1">//instruccions</span>
<span class="linenos" data-linenos="3 "></span><span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="nx">condició</span><span class="p">);</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">for</span> <span class="p">(</span><span class="nv">$i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="nv">$i</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">;</span><span class="nv">$i</span><span class="o">++</span><span class="p">){</span>
<span class="linenos" data-linenos="2 "></span>    <span class="c1">//instruccions</span>
<span class="linenos" data-linenos="3 "></span><span class="p">}</span>
</code></pre></div></p>
<p><a href="http://php.net/manual/es/language.control-structures.php">http://php.net/manual/es/language.control-structures.php</a></p>
<h4 id="expansio-de-variables">Expansió de variables</h4>
<ul>
<li>Podem introduir una variable dins d'un text sempre que usem les cometes dobles per a delimitar el text. Açò farà que el contingut de la variable s'expandisca i es concatene amb el text existent en la cadena.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">echo</span> <span class="s2">"&lt;p&gt;Mòdul: </span><span class="si">$module</span><span class="s2">&lt;/p&gt;"</span>
</code></pre></div>
<ul>
<li>A voltes, és necessari envoltar-la entre claus</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">echo</span> <span class="s2">"&lt;p&gt;Mòdul: </span><span class="si">{</span><span class="nv">$module</span><span class="si">}</span><span class="s2">DAW&lt;/p&gt;"</span>
</code></pre></div>
<ul>
<li>Si no posàrem les claus l'intèrpret cercaria una variable que es cride $moduleDAW</li>
</ul>
<h2 id="maneig-de-cadenes-de-text">Maneig de cadenes de text</h2>
<ul>
<li>Podem utilitzar tant cometes simples com a cometes dobles.</li>
<li>Per a concatenar cadenes utilitzarem l'operador punt (.)</li>
</ul>
<p><div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>$fullName = $name.' '.$surname;
</code></pre></div>
<a href="https://www.php.net/manual/es/ref.strings.php">Funcions de cadena</a></p>
<h2 id="maneig-de-dates">Maneig de dates</h2>
<h3 id="funcio-time">Funció <code>time()</code></h3>
<p>En PHP les dates s'emmagatzemen com a números enters. La funció <code>time()</code> retorna el nombre de segons transcorreguts 
des de l'1 de gener de 1970 (instant conegut com a època Unix). 
A aquesta forma d'expressar data i hora se li denomina <strong>timestamp</strong>.</p>
<h3 id="funcio-date">Funció <code>date()</code></h3>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nb">date</span> <span class="p">(</span><span class="nx">string</span> <span class="nv">$format</span> <span class="p">[,</span> <span class="nx">int</span> <span class="nv">$timestamp</span><span class="o">=</span><span class="nb">time</span><span class="p">()])</span><span class="o">:</span> <span class="nx">string</span>
</code></pre></div>
<p>La funció <code>date</code> retorna una cadena formatada segons els codi de format. Si no li passem la variable <code>timestamp</code> 
ens retorna la cadena formatada per a la data i l'hora actual.</p>
<p>Els codis de format més habituals  per a la funció <code>date</code> són:</p>
<table>
<thead>
<tr>
<th>CODI</th>
<th>DESCRIPCIÓ</th>
</tr>
</thead>
<tbody>
<tr>
<td>a</td>
<td>am o pm</td>
</tr>
<tr>
<td>A</td>
<td>AM o PM</td>
</tr>
<tr>
<td>d</td>
<td>Dia del mes amb zeros</td>
</tr>
<tr>
<td>D</td>
<td>Abreviatura del dia de la setmana (en anglès)</td>
</tr>
<tr>
<td>F</td>
<td>Nom del mes (en anglès)</td>
</tr>
<tr>
<td>h</td>
<td>Hora en format 1-12</td>
</tr>
<tr>
<td>H</td>
<td>Hora en format 0-23</td>
</tr>
<tr>
<td>i</td>
<td>Minuts</td>
</tr>
<tr>
<td>j</td>
<td>Dia del mes sense zeros</td>
</tr>
<tr>
<td>l</td>
<td>Dia de la setmana</td>
</tr>
<tr>
<td>m</td>
<td>Número de mes (1-12)</td>
</tr>
<tr>
<td>M</td>
<td>Abreviatura del mes (en anglès)</td>
</tr>
<tr>
<td>s</td>
<td>Segons</td>
</tr>
<tr>
<td>y</td>
<td>Any amb 2 dígits</td>
</tr>
<tr>
<td>Y</td>
<td>Any amb 4 dígits</td>
</tr>
<tr>
<td>z</td>
<td>Dia de l'any (1-365)</td>
</tr>
</tbody>
</table>
<p>La informació completa la pots trobar en el <a href="https://www.php.net/manual/es/function.date.php">manual oficial de PHP: date</a></p>
<p>Suposant que hui és 15 de setembre de 2019 i les 19 hores 20 minuts i 23 segons et mostrem alguns exemples:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nb">date</span><span class="p">(</span><span class="s2">"d-m-Y"</span><span class="p">);</span> <span class="c1">// 15-09-2019</span>
<span class="linenos" data-linenos="2 "></span><span class="nb">date</span><span class="p">(</span><span class="s2">"H:i:s"</span><span class="p">);</span>  <span class="c1">//  19:20:23</span>
<span class="linenos" data-linenos="3 "></span><span class="nb">date</span><span class="p">(</span><span class="s2">"Y"</span><span class="p">);</span> <span class="c1">// 2019</span>
<span class="linenos" data-linenos="4 "></span><span class="nb">date</span><span class="p">(</span><span class="s2">"YmdHis"</span><span class="p">);</span> <span class="c1">// 20190915192023</span>
<span class="linenos" data-linenos="5 "></span><span class="nb">date</span><span class="p">(</span><span class="s2">"d/m/y H:i a"</span><span class="p">);</span> <span class="c1">// 15/09/19 19:20 pm</span>
<span class="linenos" data-linenos="6 "></span><span class="nb">date</span><span class="p">(</span><span class="s2">"d-m-Y H:i"</span><span class="p">,</span> <span class="nb">time</span><span class="p">());</span> <span class="c1">// Moment actual</span>
</code></pre></div>
<h3 id="funcio-mktimehora-min-seg-mes-dia-any">Funció <code>mktime(hora, min, seg, mes, dia, any)</code></h3>
<p>La funció mktime permet obtenir la marca de temps Unix (<em>timestamp</em>) d'una data.</p>
<p>Per exemple:</p>
<p><div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nv">$data</span> <span class="o">=</span> <span class="nb">mktime</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span><span class="mi">2020</span><span class="p">);</span>
<span class="linenos" data-linenos="2 "></span><span class="k">echo</span> <span class="nb">date</span><span class="p">(</span><span class="s1">'d-m-Y'</span><span class="p">,</span> <span class="nv">$data</span><span class="p">);</span> <span class="c1">// mostrarà 01-01-2020</span>
</code></pre></div>
Més informació en <a href="https://www.php.net/manual/es/function.mktime.php">https://www.php.net/manual/es/function.mktime.php</a></p>
<p>Un altra forma de crear dates és mitjançant la funció <code>strtotime()</code> on podem indicar les dates mitjançant una cadena de text. Per exemple:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="c1">// posarem la data en el format any-mes-dia per a evitar confusions.</span>
<span class="linenos" data-linenos="2 "></span><span class="nv">$date</span> <span class="o">=</span><span class="nb">strtotime</span><span class="p">(</span><span class="s2">"2020-01-01"</span><span class="p">);</span> 
</code></pre></div>
<h3 id="operar-amb-dates">Operar amb dates</h3>
<p>Com hem dit al principi les dates s'emmagatzem com a enters on cada unitat representa un segon. Així podem sumar i restar dates (<em>timestamp</em>) per a afegir, llevar o calcular diferències entre ells.</p>
<p>Per exemple, per poder determinar els dies que falten per a l'1 de gener de 2020 faríem:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nv">$data</span><span class="o">=</span><span class="nb">mktime</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span><span class="mi">2020</span><span class="p">);</span> <span class="c1">// timestamp que representa l'1 de gener de 2020</span>
<span class="linenos" data-linenos="2 "></span><span class="nv">$diferencia</span><span class="o">=</span><span class="nv">$data</span> <span class="o">-</span> <span class="nb">time</span><span class="p">();</span> <span class="c1">// restem a l'1 de gener de 2020 el temps actual, </span>
<span class="linenos" data-linenos="3 "></span>                                <span class="c1">// el resultat estarà en segons.</span>
<span class="linenos" data-linenos="4 "></span><span class="nv">$diferenciaEnDies</span> <span class="o">=</span><span class="p">(((</span> <span class="nv">$diferencia</span> <span class="o">/</span> <span class="mi">60</span><span class="p">)</span> <span class="o">/</span> <span class="mi">60</span> <span class="p">)</span> <span class="o">/</span> <span class="mi">24</span> <span class="p">);</span>
<span class="linenos" data-linenos="5 "></span><span class="cm">/*  </span>
<span class="linenos" data-linenos="6 "></span><span class="cm">    dividim els segons entre 60 i obtenim els minuts,</span>
<span class="linenos" data-linenos="7 "></span><span class="cm">    els dividim entre 60 i obtenim les hores,</span>
<span class="linenos" data-linenos="8 "></span><span class="cm">    els dividim entre 24 i obtenim els dies </span>
<span class="linenos" data-linenos="9 "></span><span class="cm">*/</span>
</code></pre></div>
<h3 id="validar-dates">Validar dates</h3>
<p>En la funció <code>checkdate</code> podem validar una data.</p>
<p><div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nb">checkdate</span> <span class="p">(</span><span class="nx">int</span> <span class="nv">$month</span><span class="p">,</span> <span class="nx">int</span> <span class="nv">$day</span> <span class="p">,</span><span class="nx">int</span> <span class="nv">$year</span><span class="p">)</span><span class="o">:</span> <span class="nx">bool</span>
</code></pre></div>
La funció torna <code>true</code> si la data es vàlida, si no, torna  <code>false</code>. </p>
<h3 id="classe-datetime">Classe DateTime</h3>
<p>PHP disposa també de la classe <code>DateTime</code> per a representar les dates, la veurem més avant.</p>
<div class="admonition todo">
<p class="admonition-title">Activitat 3: Treballar amb dates</p>
<p>Crea un fitxer anomenat dates.php i realitza les següents tasques:</p>
<ol>
<li>Mostra la data i hora actuals amb el format: <code>dd/mm/yyyy hh:mm:ss</code></li>
<li>Mostra el nom de la zona horària que s'utilitza per defecte.</li>
<li>Mostra la data de que serà d’ací 45 dies.</li>
<li>Mostra el nombre de dies que han passat des de l'1 de gener.</li>
<li>Mostra la data i hora actuals de Nova York.</li>
<li>Mostra el dia de la setmana que era l'1 de gener d'enguany.</li>
</ol>
<p>En acabar penja el document a Aules.</p>
</div>
<div class="admonition todo">
<p class="admonition-title">Activitat 4</p>
<p><code>200dadesPersonals.php</code>: Escriu un programa que emmagatzeme en variables teu nom, primer cognom, segon cognom, email, any de naixement i telèfon. Després mostra'ls per pantalla dins d'una taula.     </p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Nom</td>
<td>Bruce</td>
<td></td>
</tr>
<tr>
<td>Cognoms</td>
<td>Wayne</td>
<td></td>
</tr>
<tr>
<td>Email</td>
<td>batman@dccomics.com</td>
<td></td>
</tr>
<tr>
<td>Any de naixement</td>
<td>1939</td>
<td></td>
</tr>
<tr>
<td>Telèfon</td>
<td>555666777</td>
<td></td>
</tr>
</tbody>
</table>
<p><code>206anyos.php</code>: Després de llegir l'edat d'una persona, mostrar l'edat que tindrà d'aquí a 10 anys i fa 10 anys. A més, mostra quin any serà en cada un dels casos. Finalment, mostra l'any de jubilació suposant que treballaràs fins als 65 anys.</p>
<p>Tip: <code>$anyoActual = date("Y")</code>;</p>
</div>
<h2 id="maneig-darrays">Maneig d'arrays</h2>
<p>Un array és un tipus de dades que ens permet emmagatzemar diversos valors. Per tal d'accedir a un valor utilitzarem una <em>clau</em>. Les claus poden ser nombres o textos (<em>arrays associatius</em>). Si no indiquem cap clau, a cada element se li associarà una clau numèrica correlativa.</p>
<h3 id="array-indexat">Array indexat</h3>
<h4 id="crear-array">Crear array</h4>
<ul>
<li>Podem crear un array buit de dues formes:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nv">$noms</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="linenos" data-linenos="2 "></span><span class="nv">$noms</span> <span class="o">=</span> <span class="p">[];</span>
</code></pre></div>
<ul>
<li>Si volem assignar valors al array en el moment de crear-ho: </li>
</ul>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nv">$noms</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">'Sandra'</span><span class="p">,</span> <span class="s1">'Pedro'</span><span class="p">,</span> <span class="s1">'Andrea'</span><span class="p">);</span> 
<span class="linenos" data-linenos="2 "></span><span class="nv">$noms</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Sandra'</span><span class="p">,</span> <span class="s1">'Pedro'</span><span class="p">,</span> <span class="s1">'Andrea'</span><span class="p">];</span>
</code></pre></div>
<h4 id="mostrar-el-contingut-dun-array">Mostrar el contingut d'un array</h4>
<p>Si intentem mostrar el contingut d'un array amb <strong>echo</strong> no obtindrem  les dades que hi ha dins del array. En lloc d'açò podem utilitzar la funció print_r: </p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nb">print_r</span><span class="p">(</span><span class="nv">$noms</span><span class="p">);</span>
</code></pre></div>
<p>Però si necessitem donar-li format als continguts del array, haurem de recórrer-ho amb un bucle i anar mostrant element a element.</p>
<h4 id="afegint-elements-al-array">Afegint elements al array</h4>
<p>Podem afegir elements al array utilitzant claudàtors buits. La clau d'aquests elements serà el següent índex numèric disponible.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nv">$noms</span><span class="p">[]</span><span class="o">=</span><span class="s1">'Raul'</span><span class="p">;</span> <span class="nv">$noms</span><span class="p">[]</span><span class="o">=</span><span class="s1">'Marta'</span><span class="p">;</span>
</code></pre></div>
<h4 id="accedir-als-elements-del-array">Accedir als elements del array</h4>
<p>Accedirem als elements del array indicant la clau de l'element entre claudàtors:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">echo</span> <span class="nv">$noms</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
</code></pre></div>
<p>També podem modificar el seu valor:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nv">$noms</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Sara'</span><span class="p">;</span>
</code></pre></div>
<h4 id="recorrer-arrays">Recórrer arrays</h4>
<p><img alt="" src="../assets/t204.png"/></p>
<h3 id="arrays-associatius">Arrays associatius</h3>
<p>Si el array conté dades diverses i/o ens interessa accedir a ells amb claus més específiques que un simple índex numèric podem utilitzar arrays associatius: </p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nv">$alumne</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">'nom'</span> <span class="o">=&gt;</span> <span class="s1">'Sara'</span><span class="p">,</span> <span class="s1">'cognom'</span> <span class="o">=&gt;</span> <span class="s1">'García'</span><span class="p">,</span> <span class="s1">'edat'</span> <span class="o">=&gt;</span> <span class="mi">22</span> <span class="p">);</span>
<span class="linenos" data-linenos="2 "></span><span class="nv">$alumne</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'nom'</span> <span class="o">=&gt;</span> <span class="s1">'Sara'</span><span class="p">,</span> <span class="s1">'cognom'</span> <span class="o">=&gt;</span> <span class="s1">'García'</span><span class="p">,</span> <span class="s1">'edat'</span> <span class="o">=&gt;</span> <span class="mi">22</span> <span class="p">];</span>
<span class="linenos" data-linenos="3 "></span><span class="nv">$alumne</span><span class="p">[</span><span class="s1">'nom'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Verónica'</span><span class="p">;</span>
<span class="linenos" data-linenos="4 "></span><span class="k">echo</span> <span class="nv">$alumne</span><span class="p">[</span><span class="s1">'nom'</span><span class="p">];</span>
</code></pre></div>
<h4 id="recorrer-arrays-associatius">Recórrer arrays associatius</h4>
<p><img alt="" src="../assets/t205.png"/></p>
<h4 id="recorrer-claus-i-valors">Recórrer claus i valors</h4>
<p><img alt="" src="../assets/t206.png"/></p>
<h3 id="arrays-multidimensionals">Arrays multidimensionals</h3>
<p>Imagina que volem tenir un array els elements del qual són noms d'esports. Volem dividir-los en esports d'hivern i esports d'estiu. Podem crear un array esports que continga dos elements que al seu torn també seran arrays.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nv">$esports</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'hivern'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'esquí de fons'</span><span class="p">,</span> <span class="s1">'hoquei sobre gel'</span><span class="p">],</span> <span class="s1">'estiu'</span> <span class="o">=&gt;</span> <span class="p">[</span> <span class="s1">'natació'</span><span class="p">,</span> <span class="s1">'voley platja'</span><span class="p">]</span> <span class="p">];</span>
</code></pre></div>
<p>Per a accedir al primer esport d'hivern:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">echo</span> <span class="nv">$esports</span><span class="p">[</span><span class="s1">'hivern'</span><span class="p">][</span><span class="mi">0</span><span class="p">];</span>
</code></pre></div>
<h3 id="funcions-darrays">Funcions d'arrays</h3>
<p>Podem obtenir la mida de l'array mitjançant la funció <code>count(array)</code>. 
Per recórrer l'array farem ús d'un bucle <code>for</code>:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>$tam = count($fruites); // mida de l'array
<span class="linenos" data-linenos="2 "></span>for ($i=0; $i<span class="p">&lt;</span><span class="nt">count</span><span class="err">($</span><span class="na">fruites</span><span class="err">);</span> <span class="err">$</span><span class="na">i</span><span class="err">++)</span> <span class="err">{</span>
<span class="linenos" data-linenos="3 "></span>   <span class="na">echo</span> <span class="err">"</span><span class="na">Element</span> <span class="err">$</span> <span class="na">i:</span> <span class="err">$</span> <span class="na">fruites</span> <span class="err">[$</span> <span class="na">i</span><span class="err">]</span> <span class="err">&lt;</span><span class="na">br</span> <span class="p">/&gt;</span>";
<span class="linenos" data-linenos="4 "></span>}
</code></pre></div>
<p>Les operacions més importants que podem realitzar amb <em>arrays</em> són:</p>
<ul>
<li><code>print_r($ array)</code>: mostra el contingut de tot el <code>$array</code></li>
<li><code>$elem = array_pop($array)</code>: elimina l'últim <code>$element</code></li>
<li><code>array_push ($ array, $ elem)</code>: afegeix un <code>$element</code> al final.</li>
<li><code>$bool = in_array($elem, $array)</code>: esbrina si <code>$elem</code> està en el<code>$array</code></li>
</ul>
<div class="tabbed-set" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio"><label for="__tabbed_1_1">PHP</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="nv">$fruits</span> <span class="o">=</span> <span class="p">[</span> <span class="s2">"orange"</span><span class="p">,</span> <span class="s2">"pear"</span><span class="p">,</span> <span class="s2">"apple"</span><span class="p">];</span>
<span class="linenos" data-linenos=" 2 "></span>
<span class="linenos" data-linenos=" 3 "></span><span class="nb">array_push</span> <span class="p">(</span><span class="nv">$fruites</span><span class="p">,</span> <span class="s2">"pinapple"</span><span class="p">);</span>
<span class="linenos" data-linenos=" 4 "></span><span class="nb">print_r</span><span class="p">(</span><span class="nv">$fruits</span><span class="p">);</span>
<span class="linenos" data-linenos=" 5 "></span>
<span class="linenos" data-linenos=" 6 "></span><span class="nv">$lastFruit</span> <span class="o">=</span> <span class="nb">array_pop</span><span class="p">(</span><span class="nv">$fruits</span><span class="p">);</span>
<span class="linenos" data-linenos=" 7 "></span><span class="k">if</span> <span class="p">(</span><span class="nb">in_array</span><span class="p">(</span><span class="s2">"pineapple"</span><span class="p">,</span> <span class="nv">$fruits</span><span class="p">))</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 8 "></span>    <span class="k">echo</span> <span class="s2">"&lt;p&gt; Pineapple left &lt;/ p&gt;"</span><span class="p">;</span>
<span class="linenos" data-linenos=" 9 "></span><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="linenos" data-linenos="10 "></span>    <span class="k">echo</span> <span class="s2">"&lt;p&gt; No pineapple left &lt;/ p&gt;"</span><span class="p">;</span>
<span class="linenos" data-linenos="11 "></span><span class="p">}</span>
<span class="linenos" data-linenos="12 "></span><span class="nb">print_r</span><span class="p">(</span><span class="nv">$fruites</span><span class="p">);</span>
<span class="linenos" data-linenos="13 "></span><span class="cp">?&gt;</span><span class="x"></span>
</code></pre></div>
</div>
<input id="__tabbed_1_2" name="__tabbed_1" type="radio"><label for="__tabbed_1_2">Consola</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="go">Array</span>
<span class="linenos" data-linenos=" 2 "></span><span class="go">(</span>
<span class="linenos" data-linenos=" 3 "></span><span class="go">  [0] =&gt; orange</span>
<span class="linenos" data-linenos=" 4 "></span><span class="go">  [1] =&gt; pear</span>
<span class="linenos" data-linenos=" 5 "></span><span class="go">  [2] =&gt; apple</span>
<span class="linenos" data-linenos=" 6 "></span><span class="go">  [3] =&gt; pinapple</span>
<span class="linenos" data-linenos=" 7 "></span><span class="go">)</span>
<span class="linenos" data-linenos=" 8 "></span><span class="go">&lt;p&gt;No pineapple left&lt;/ p&gt;</span>
<span class="linenos" data-linenos=" 9 "></span><span class="go">Array</span>
<span class="linenos" data-linenos="10 "></span><span class="go">(</span>
<span class="linenos" data-linenos="11 "></span><span class="go">  [0] =&gt; orange</span>
<span class="linenos" data-linenos="12 "></span><span class="go">  [1] =&gt; pear</span>
<span class="linenos" data-linenos="13 "></span><span class="go">  [2] =&gt; apple</span>
<span class="linenos" data-linenos="14 "></span><span class="go">)</span>
</code></pre></div>
</div>
</input></input></div>
<ul>
<li><code>$claus = array_keys($array)</code>: torna les claus de l'<code>$ array</code> associatiu.</li>
<li><code>$tam = count ($array)</code>: retorna la mida de <code>$ array</code>.</li>
<li><code>sort($array)</code>: ordena els elements de l' <code>$ array</code>.</li>
<li><code>isset($array[element])</code>: indica si existeix / té valor element dins del array.</li>
<li><code>unset($array[element])</code>: elimina l'element de l'array (deixa un buit).</li>
</ul>
<div class="tabbed-set" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio"><label for="__tabbed_2_1">PHP</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="nv">$capitals</span> <span class="o">=</span> <span class="k">array</span> <span class="p">(</span><span class="s2">"Italy"</span> <span class="o">=&gt;</span> <span class="s2">"Rome"</span><span class="p">,</span>
<span class="linenos" data-linenos=" 2 "></span>  <span class="s2">"France"</span> <span class="o">=&gt;</span> <span class="s2">"Paris"</span><span class="p">,</span>
<span class="linenos" data-linenos=" 3 "></span>  <span class="s2">"Portugal"</span> <span class="o">=&gt;</span> <span class="s2">"Lisbon"</span><span class="p">);</span>
<span class="linenos" data-linenos=" 4 "></span>
<span class="linenos" data-linenos=" 5 "></span><span class="nv">$countries</span> <span class="o">=</span> <span class="nb">array_keys</span><span class="p">(</span><span class="nv">$capitals</span><span class="p">);</span>
<span class="linenos" data-linenos=" 6 "></span><span class="nb">print_r</span><span class="p">(</span><span class="nv">$countries</span><span class="p">);</span>
<span class="linenos" data-linenos=" 7 "></span><span class="nb">sort</span><span class="p">(</span><span class="nv">$countries</span><span class="p">);</span>
<span class="linenos" data-linenos=" 8 "></span><span class="nb">print_r</span><span class="p">(</span><span class="nv">$countries</span><span class="p">);</span>
<span class="linenos" data-linenos=" 9 "></span>
<span class="linenos" data-linenos="10 "></span><span class="nb">unset</span><span class="p">(</span><span class="nv">$capitals</span><span class="p">[</span><span class="s2">"France"</span><span class="p">]);</span>
<span class="linenos" data-linenos="11 "></span><span class="nb">print_r</span><span class="p">(</span><span class="nv">$capitals</span><span class="p">);</span>
</code></pre></div>
</div>
<input id="__tabbed_2_2" name="__tabbed_2" type="radio"><label for="__tabbed_2_2">Consola</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="go">Array</span>
<span class="linenos" data-linenos=" 2 "></span><span class="go">(</span>
<span class="linenos" data-linenos=" 3 "></span><span class="go">  [0] =&gt; Italy</span>
<span class="linenos" data-linenos=" 4 "></span><span class="go">  [1] =&gt; France</span>
<span class="linenos" data-linenos=" 5 "></span><span class="go">  [2] =&gt; Portugal</span>
<span class="linenos" data-linenos=" 6 "></span><span class="go">)</span>
<span class="linenos" data-linenos=" 7 "></span><span class="go">Array</span>
<span class="linenos" data-linenos=" 8 "></span><span class="go">(</span>
<span class="linenos" data-linenos=" 9 "></span><span class="go">  [0] =&gt; France</span>
<span class="linenos" data-linenos="10 "></span><span class="go">  [1] =&gt; Italy</span>
<span class="linenos" data-linenos="11 "></span><span class="go">  [2] =&gt; Portugal</span>
<span class="linenos" data-linenos="12 "></span><span class="go">)</span>
<span class="linenos" data-linenos="13 "></span><span class="go">Array</span>
<span class="linenos" data-linenos="14 "></span><span class="go">(</span>
<span class="linenos" data-linenos="15 "></span><span class="go">  [Italy] =&gt; Rome</span>
<span class="linenos" data-linenos="16 "></span><span class="go">  [Portugal] =&gt; Lisbon</span>
<span class="linenos" data-linenos="17 "></span><span class="go">)</span>
</code></pre></div>
</div>
</input></input></div>
<p>Existeixen moltíssimes més funcions per treballar amb arrays. Tota la informació en el <a href="https://www.php.net/manual/es/ref.array.php">documentació oficial</a>.</p>
<div class="admonition tip">
<p class="admonition-title">Articles per aprofundir en les operacions amb arrays</p>
<ul>
<li>Un article molt complet (en anglès) de <a href="&lt;https://code.tutsplus.com/tutorials/working-with-php-arrays-in-the-right-way-cms-28606">Com treballar amb arrays en PHP de la manera correcta</a>.</li>
<li>Un altre article recomanable (en anglès) és <a href="https://code.tutsplus.com/tutorials/wow-to-sort-arrays-in-php--cms-32313">Com ordenar arrays en PHP</a>.</li>
</ul>
</div>
<p>Altres recursos: </p>
<ul>
<li><a href="https://www.studytonight.com/php/indexed-array">https://www.studytonight.com/php/indexed-array</a></li>
<li><a href="https://aprende-web.net/php/php6_1.php">https://aprende-web.net/php/php6_1.php</a></li>
</ul>
<h2 id="funcions">Funcions</h2>
<h3 id="funcions-predefinides">Funcions predefinides</h3>
<p>Algunes de les funcions predefinides en PHP són les següents, però hi ha moltíssimes més 
vinculades als diferents mòduls que podem instal·lar.</p>
<ul>
<li><code>is_null($var)</code> determina si una variable és nula o no.</li>
<li><code>isset($var)</code> determina si una variable estan definida i no és NULL.</li>
<li><code>unset($var)</code> destrueix les variables especificades.</li>
<li><code>empty($var)</code> torna <strong>true</strong> si no existeix o és <strong>FALSE</strong></li>
<li><code>is_int($var)</code>, <strong>is_float()</strong>, <strong>is_bool()</strong>, <strong>is_array()</strong></li>
<li><code>var_dump($var)</code>, mostra informació de la variable.</li>
</ul>
<h3 id="funcions-definides-per-lusuari">Funcions definides per l'usuari</h3>
<p>Per a crear les teues pròpies funcions, hauràs d'usar la paraula <strong>function</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">function</span> <span class="nf">suma</span><span class="p">(</span><span class="nv">$a</span><span class="p">,</span> <span class="nv">$b</span><span class="p">)</span> <span class="p">{</span> 
<span class="linenos" data-linenos="2 "></span>    <span class="k">return</span> <span class="nv">$a</span> <span class="o">+</span> <span class="nv">$b</span><span class="p">;</span> 
<span class="linenos" data-linenos="3 "></span><span class="p">}</span>
</code></pre></div>
<p>Per tal d'invocar la funció:</p>
<p><div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nv">$resultat</span> <span class="o">=</span> <span class="nx">suma</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">);</span>
</code></pre></div>
Si una funció no té una sentència <strong>return</strong>, retorna <strong>null</strong> en finalitzar.</p>
<div class="admonition important">
<p class="admonition-title">Command-query separation</p>
<p>Sí bé és un principi de la programació orientada a objectes és útil usar-lo també quan definim funcions. El principi afirma que cada mètode ha de ser un comandament que realitza una acció o una consulta que retorna dades al que la crida, pero no ambdues coses.</p>
</div>
<h3 id="valors-per-defecte-en-els-parametres">Valors per defecte en els paràmetres</h3>
<p>Podem indicar valors per defecte per als paràmetres. Si quan cridem a la funció no indiquem el valor d'un paràmetre es prendrà el valor per defecte indicat.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">function</span> <span class="nf">preuAmbIva</span><span class="p">(</span><span class="nv">$preu</span><span class="p">,</span> <span class="nv">$iva</span><span class="o">=</span><span class="mf">0.21</span><span class="p">){</span>
<span class="linenos" data-linenos="2 "></span>    <span class="k">return</span> <span class="nv">$preu</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="nv">$iva</span><span class="p">);</span>
<span class="linenos" data-linenos="3 "></span><span class="p">}</span>
<span class="linenos" data-linenos="4 "></span><span class="nv">$preu</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="linenos" data-linenos="5 "></span><span class="nv">$pIva</span> <span class="o">=</span> <span class="nx">preuAmbIva</span><span class="p">(</span><span class="nv">$preu</span><span class="p">);</span>
</code></pre></div>
<ul>
<li>Pot haver-hi més d'un paràmetre amb valor per defecte, però sempre han d'estar al final.</li>
</ul>
<h3 id="pas-de-parametres-per-referencia">Pas de paràmetres per referència</h3>
<p>Per defecte els paràmetres es passen per valor. Per a passar un paràmetre per referència afegirem el símbol <strong>&amp;</strong> davant del seu nom.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">function</span> <span class="nf">preuAmbIva</span><span class="p">(</span><span class="o">&amp;</span><span class="nv">$preu</span><span class="p">,</span> <span class="nv">$iva</span><span class="o">=</span><span class="mf">0.18</span><span class="p">){</span>
<span class="linenos" data-linenos="2 "></span>    <span class="nv">$preu</span> <span class="o">*=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="nv">$iva</span><span class="p">);</span>
<span class="linenos" data-linenos="3 "></span><span class="p">}</span>
</code></pre></div>
<h4 id="declaracions-de-tipus-type-hinting">Declaracions de tipus (Type Hinting)</h4>
<p>Les funcions obliguen a que els paràmetres siguen de cert tipus. Si el valor donat és d'un tipus incorrecte, es generarà un error. Per això s'ha d'anteposar-se el nom del tipus al nom del paràmetre. Es pot fer que una declaració accepte valors <strong>NULL</strong> si el valor predeterminat del
paràmetre s'estableix a NULL.</p>
<h4 id="tipus-valids">Tipus vàlids</h4>
<table>
<thead>
<tr>
<th align="center">Type</th>
<th align="center">Description</th>
<th align="center">Version</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">Class/interface name</td>
<td align="center">The value must be an instanceof the given class or interface.</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">self</td>
<td align="center">The value must be an instanceof the same class as the one in which the type declaration is used. Can only be used in classes.</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">parent</td>
<td align="center">The value must be an instanceof the parent of the class in which the type declaration is used. Can only be used in classes.</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">array</td>
<td align="center">The value must be an array.</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">callable</td>
<td align="center">The value must be a valid callable. Cannot be used as a class property type declaration.</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">bool</td>
<td align="center">The value must be a boolean value.</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">float</td>
<td align="center">The value must be a floating point number.</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">int</td>
<td align="center">The value must be an integer.</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">string</td>
<td align="center">The value must be a string.</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">iterable</td>
<td align="center">The value must be either an array or an instanceof Traversable.</td>
<td align="center">PHP 7.1.0</td>
</tr>
<tr>
<td align="center">object</td>
<td align="center">The value must be an object.</td>
<td align="center">PHP 7.2.0</td>
</tr>
<tr>
<td align="center">mixed</td>
<td align="center">The value can be any value.</td>
<td align="center">PHP 8.0.0</td>
</tr>
</tbody>
</table>
<h4 id="exemple">Exemple</h4>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">function</span> <span class="nf">suma</span><span class="p">(</span><span class="nx">int</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">int</span> <span class="nx">b</span><span class="p">)</span><span class="o">:</span><span class="nx">int</span>
<span class="linenos" data-linenos="2 "></span><span class="p">{</span>
<span class="linenos" data-linenos="3 "></span>    <span class="k">return</span> <span class="nv">$a</span> <span class="o">+</span> <span class="nv">$b</span><span class="p">;</span>
<span class="linenos" data-linenos="4 "></span><span class="p">}</span>
<span class="linenos" data-linenos="5 "></span><span class="nv">$resultado</span> <span class="o">=</span> <span class="nx">suma</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">);</span>
</code></pre></div>
<h4 id="funcions-com-a-parametres">Funcions com a paràmetres</h4>
<p>En PHP és possible passar funcions com a paràmetres a altres funcions. Només cal passar el nom de la funció entre cometes. 
Exemple:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span> <span class="k">function</span> <span class="nf">calculator</span><span class="p">(</span><span class="nv">$operation</span><span class="p">,</span><span class="nv">$numA</span><span class="p">,</span><span class="nv">$numB</span><span class="p">){</span>
<span class="linenos" data-linenos="2 "></span>    <span class="k">return</span> <span class="nv">$operation</span><span class="p">(</span><span class="nv">$numA</span><span class="p">,</span><span class="nv">$numB</span><span class="p">);</span> 
<span class="linenos" data-linenos="3 "></span><span class="p">}</span>
<span class="linenos" data-linenos="4 "></span><span class="k">function</span> <span class="nf">sumar</span><span class="p">(</span><span class="nv">$a</span><span class="p">,</span><span class="nv">$b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nv">$a</span><span class="o">+</span><span class="nv">$b</span><span class="p">;</span> <span class="p">}</span>
<span class="linenos" data-linenos="5 "></span><span class="k">function</span> <span class="nf">restar</span><span class="p">(</span><span class="nv">$a</span><span class="p">,</span><span class="nv">$b</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="nv">$a</span><span class="o">-</span><span class="nv">$b</span><span class="p">;</span> <span class="p">}</span>
<span class="linenos" data-linenos="6 "></span>
<span class="linenos" data-linenos="7 "></span><span class="nv">$a</span><span class="o">=</span><span class="mi">4</span><span class="p">;</span><span class="nv">$b</span><span class="o">=</span><span class="mi">6</span><span class="p">;</span>
<span class="linenos" data-linenos="8 "></span><span class="k">echo</span> <span class="nx">calculator</span><span class="p">(</span><span class="s1">'sumar'</span><span class="p">,</span><span class="nv">$a</span><span class="p">,</span><span class="nv">$b</span><span class="p">);</span>
<span class="linenos" data-linenos="9 "></span><span class="k">echo</span> <span class="nx">calculator</span><span class="p">(</span><span class="s1">'restar'</span><span class="p">,</span><span class="nv">$a</span><span class="p">,</span><span class="nv">$b</span><span class="p">);</span>
</code></pre></div>
<h4 id="funcions-anonimes-closures">Funcions anònimes (<strong>closures</strong>)</h4>
<ul>
<li>Estan implementades usant la classe <strong>Closure</strong></li>
<li>Permeten la creació de funcions que no tenen un nom específic</li>
<li>Podem assignar la funció a una variable o passar-la com a paràmetre a una altra funció.</li>
<li>Exemple</li>
</ul>
<p>Sense paràmetres:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nv">$anonima</span> <span class="o">=</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
<span class="linenos" data-linenos="2 "></span>    <span class="k">echo</span> <span class="s2">"Hola"</span><span class="p">;</span> 
<span class="linenos" data-linenos="3 "></span><span class="p">};</span> 
<span class="linenos" data-linenos="4 "></span><span class="nv">$anonima</span><span class="p">();</span>
</code></pre></div>
<p>Amb paràmetres:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nv">$anonima</span> <span class="o">=</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$nom</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="2 "></span>    <span class="k">echo</span> <span class="s2">"Hola </span><span class="si">{</span><span class="nv">$nom</span><span class="si">}</span><span class="s2">"</span><span class="p">;</span> 
<span class="linenos" data-linenos="3 "></span><span class="p">};</span> 
<span class="linenos" data-linenos="4 "></span><span class="nv">$anonima</span><span class="p">(</span><span class="s1">'Vicent'</span><span class="p">);</span>
</code></pre></div>
<h4 id="usar-variables-de-lambit-superior">Usar variables de l'àmbit superior</h4>
<ul>
<li>Una funció anònima pot usar variables de l'àmbit superior mitjançant la paraula reservada <strong>use</strong>: </li>
</ul>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">function</span> <span class="nf">saluda</span><span class="p">(</span><span class="nx">callable</span> <span class="nv">$fnSaluda</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="2 "></span>    <span class="nv">$fnSaluda</span><span class="p">(</span><span class="s1">'Vicent'</span><span class="p">);</span> 
<span class="linenos" data-linenos="3 "></span><span class="p">}</span> 
<span class="linenos" data-linenos="4 "></span><span class="nv">$salutacio</span> <span class="o">=</span> <span class="s1">'Hola'</span><span class="p">;</span> 
<span class="linenos" data-linenos="5 "></span><span class="nv">$anonima</span> <span class="o">=</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$nom</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$salutacio</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="6 "></span>    <span class="k">echo</span> <span class="s2">"</span><span class="si">{</span><span class="nv">$salutacio</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nv">$nom</span><span class="si">}</span><span class="s2">"</span><span class="p">;</span> 
<span class="linenos" data-linenos="7 "></span><span class="p">};</span> 
<span class="linenos" data-linenos="8 "></span><span class="nx">saluda</span><span class="p">(</span><span class="nv">$anonima</span><span class="p">);</span>
</code></pre></div>
<h4 id="llibreries">Llibreries</h4>
<p>Podem fer llibreries de funcions guardant-les en un fitxer que desprès importem des d'on les utilitzem. Ho podem fer amb include, o utilitzant composer per a fer-ho.</p>
<h2 id="noves-caracterisques-php-7">Noves caracterísques PHP 7</h2>
<h3 id="spaceship-operator">Spaceship operator  (&lt;==&gt;)</h3>
<p>Compara dues expressions $a i $b i torna -1 si $a és menor que $b, 0 si són iguals i 1 si $b és major que $a.</p>
<p>Exemple:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="c1">// Integers</span>
<span class="linenos" data-linenos="2 "></span><span class="k">echo</span> <span class="mi">1</span> <span class="o">&lt;=&gt;</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// 0</span>
<span class="linenos" data-linenos="3 "></span><span class="k">echo</span> <span class="mi">1</span> <span class="o">&lt;=&gt;</span> <span class="mi">2</span><span class="p">;</span> <span class="c1">// -1</span>
<span class="linenos" data-linenos="4 "></span><span class="k">echo</span> <span class="mi">2</span> <span class="o">&lt;=&gt;</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// 1</span>
</code></pre></div>
<h3 id="operador-de-fusio-de-null">Operador de fusió de null ??</h3>
<p>Torna el primer operand si existeix i no és NULL o el segon operand.</p>
<p>Exemple:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="c1">// Fetches the value of $_GET['user'] and returns 'nobody'</span>
<span class="linenos" data-linenos="2 "></span><span class="c1">// if it does not exist.</span>
<span class="linenos" data-linenos="3 "></span><span class="nv">$username</span> <span class="o">=</span> <span class="nv">$_GET</span><span class="p">[</span><span class="s1">'user'</span><span class="p">]</span><span class="o">??</span><span class="s1">'nobody'</span><span class="p">;</span>
<span class="linenos" data-linenos="4 "></span>
<span class="linenos" data-linenos="5 "></span><span class="c1">// This is equivalent to:</span>
<span class="linenos" data-linenos="6 "></span><span class="nv">$username</span> <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">[</span><span class="s1">'user'</span><span class="p">])</span><span class="o">?</span><span class="nv">$_GET</span><span class="p">[</span><span class="s1">'user'</span><span class="p">]</span><span class="o">:</span><span class="s1">'nobody'</span><span class="p">;</span>
</code></pre></div>
<p><strong>Més recursos:</strong></p>
<ul>
<li><a href="https://www.php.net/manual/es/migration70.new-features.php">Noves característiques PHP 7.0</a></li>
<li><a href="https://www.php.net/manual/es/migration71.new-features.php">Noves característiques PHP 7.1</a></li>
<li><a href="https://www.php.net/manual/es/migration72.new-features.php">Noves característiques PHP 7.2</a></li>
<li><a href="https://www.php.net/manual/es/migration73.new-features.php">Noves característiques PHP 7.3</a></li>
<li><a href="https://www.php.net/manual/es/migration74.new-features.php">Noves característiques PHP 7.4</a></li>
<li><a href="https://www.php.net/manual/es/migration80.new-features.php">Noves característiques PHP 8.0</a></li>
</ul>
<h2 id="processament-de-formularis">Processament de formularis</h2>
<h3 id="que-es-una-peticio-http">Què és una petició HTTP?</h3>
<p>Una petició HTTP és una sol·licitud d'un recurs a un servidor. La petició es realitza a través d'una URL. Amb la petició s'envien també paràmetres.</p>
<p>Hi ha diferents mètodes (METHOD) per a realitzar una petició (GET, POST, PUT, DELETE, PATCH, etc.). Els més habituals són GET i POST. La resta són més utilitzats en les RESTful API.</p>
<p><img alt="Sol·licitud HTTP" src="../assets/http-request.png"/></p>
<h3 id="metode-get">Mètode GET</h3>
<p>El mètodo de sol·licitud GET té les següents característiques:</p>
<ul>
<li>S'utilitza per a sol·licitar dades d'un recurs. Mostren els paràmetres que </li>
<li>s'envien en la url. Es poden utilitzar directament en enllaços. </li>
<li>El resultat es pot emmagatzemar en cache. Romanen en l'historial del navegador. </li>
<li>La grandària dels paràmetres està limitat a 2048 caràcters.</li>
</ul>
<p><em>Exemple de petició GET</em>
<img alt="Petició GET" src="../assets/get-example.png"/></p>
<p><em>Inspecció de la petició</em>
<img alt="Inspecció del petició GET: Capçaleres" src="../assets/get-inspect-headers.png"/></p>
<p><em>Inspecció de la petició</em>
<img alt="Inspecció del petició GET: Paràmeters" src="../assets/get-inspect-parameters.png"/></p>
<h4 id="accedir-a-les-dades-de-la-peticio-get">Accedir a les dades de la petició GET</h4>
<p>Per a accedir a les dades usem la variable superglobal <code>$_GET</code>.</p>
<p><code>$_GET</code> és un array associatiu les claus del qual coincidiran amb els noms que li hem donat als paràmetres.</p>
<p>Per a accedir als paràmetres de la petició anterior:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">echo</span> <span class="nv">$_GET</span><span class="p">[</span><span class="s1">'nom'</span><span class="p">]</span><span class="o">.</span><span class="s1">' '</span><span class="o">.</span><span class="nv">$_GET</span><span class="p">[</span><span class="s1">'cognom'</span><span class="p">];</span> <span class="c1">// Homer Simpson</span>
</code></pre></div>
<h4 id="metode-post">Mètode POST</h4>
<p>El mètode POST té les següents característiques:</p>
<ul>
<li>S'utilitza per a enviar dades a un recurs.</li>
<li>Els paràmetres van en el cos de la petició, no són visibles per a l'usuari.</li>
<li>La petició no es guarda en cache.</li>
<li>No es pot utilitzar en un enllaç.</li>
<li>No roman en l'historial.</li>
<li>No tenim la limitació de grandària dels paràmetres.</li>
<li>Es solen utilitzar en els formularis.</li>
</ul>
<h5 id="evitar-el-csrf">Evitar el CSRF</h5>
<p>En tota pàgina que reba paràmetres POST has de comprovar el <strong>HTTP referer</strong> del navegador, i que aquest siga de dins de la teua web. En PHP el referer que envia el navegador s'emmagatzema en <code>$_SERVER['HTTP_REFERER']</code>. És a dir, sols processarem peticions 
que vinguen del teu lloc web.</p>
<div class="admonition note">
<p class="admonition-title">Més informació</p>
<p>En el següent enllaç trobareu més informació relativa als atacs CSRF <a href="https://www.ionos.es/digitalguide/servidores/seguridad/cross-site-request-forgery/">CSRF: explicación del ataque Cross Site Request Forgery</a></p>
</div>
<p>Seria tal com:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">if</span><span class="p">(</span><span class="nb">parse_url</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'HTTP_REFERER'</span><span class="p">],</span> <span class="nx">PHP_URL_HOST</span><span class="p">)</span><span class="o">!=</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'HTTP_HOST'</span><span class="p">])</span> 
<span class="linenos" data-linenos="2 "></span>   <span class="k">die</span><span class="p">(</span><span class="s1">'Anti-CSRF'</span><span class="p">);</span> 
</code></pre></div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Amb aquest codi estem obligant que el navegador envie un <em>referer</em> si o sí. Per tant només ha d'utilitzar-se en pàgines a les quals el navegador accedisca des d'una altra pàgina de la nostra web.</p>
<p>Òbviament no podem col·locar-ho en la primera pàgina a la qual s'accedeix a la nostra web (<code>index.php</code> o similar), ja que si l'usuari a escrit l'adreça a mà en la barra del navegador no s'enviarà referer cap i saltarà el sistema.</p>
</div>
<h3 id="definicio-de-formularis">Definició de formularis</h3>
<p>Com hem dit abans el mètode POST s'empra en els formularis. El formulari següent enviarà les dades a la pàgina <code>index.php</code> (atribut <code>action</code> de l'element <code>form</code>).</p>
<p>Utilitza el mètode <code>post</code> indicat en l'atribut <code>method</code>:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="s">"index.php"</span> <span class="na">method</span><span class="o">=</span><span class="s">"post"</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="2 "></span>    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"nom"</span><span class="p">&gt;</span>Nom<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="3 "></span>    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">name</span><span class="o">=</span><span class="s">"nom"</span> <span class="na">value</span><span class="o">=</span><span class="s">""</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="4 "></span>    <span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
<span class="linenos" data-linenos="5 "></span>    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"cognom"</span><span class="p">&gt;</span>Cognom<span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="6 "></span>    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">name</span><span class="o">=</span><span class="s">"cognom"</span> <span class="na">value</span><span class="o">=</span><span class="s">""</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="7 "></span>    <span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
<span class="linenos" data-linenos="8 "></span>    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"submit"</span> <span class="na">value</span><span class="o">=</span><span class="s">"Enviar"</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="9 "></span><span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</code></pre></div>
<p><em>Inspecció de la petició: Headers</em>
<img alt="Inspecció del petició POST" src="../assets/post-inspect-headers.png"/></p>
<p><em>Inspecció de la petició: Paramètres</em>
<img alt="Inspecció del petició POST" src="../assets/post-inspect-parameters.png"/></p>
<h3 id="accedir-a-les-dades-de-la-peticio-post">Accedir a les dades de la petició POST</h3>
<p>Usem la variable superglobal <code>$_POST</code>. Funciona igual que <code>$_GET</code>, però amb els noms (atribut <code>name</code>) que li hem donat als camps del formulari.</p>
<p>En depuració podem mostar totes les dades rebudes:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nb">var_dump</span> <span class="p">(</span><span class="nv">$_POST</span><span class="p">);</span>
<span class="linenos" data-linenos="2 "></span><span class="nb">print_r</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">)</span>
</code></pre></div>
<p>Per a mostrar les dades individualment:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">echo</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'nom'</span><span class="p">];</span>
<span class="linenos" data-linenos="2 "></span><span class="k">echo</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'cognom'</span><span class="p">];</span>
</code></pre></div>
<h4 id="accedir-a-parametres-no-existents">Accedir a paràmetres no existents</h4>
<p>Errors del tipus  </p>
<p><div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>Notice: Undefined index: nom in /home/ubuntu/index.php on line 6
</code></pre></div>
ens indiquen que la clau <code>nom</code>  no existeix en l'array <code>$_POST</code>. La variable supergloblal <code>$_POST</code> està buida si no s'ha
enviat el formulari.</p>
<p>Per a evitar aquest tipus d'errors és important verificar que s'haja enviat el formulari prèviament:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">if</span> <span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">'REQUEST_METHOD'</span><span class="p">]</span> <span class="o">===</span> <span class="s1">'POST'</span><span class="p">)</span>
<span class="linenos" data-linenos="2 "></span><span class="p">{</span>
<span class="linenos" data-linenos="3 "></span>
<span class="linenos" data-linenos="4 "></span><span class="p">}</span>
</code></pre></div>
<h3 id="validacio-de-formularis">Validació de formularis</h3>
<p>Hem de comprovar que les dades que envia el formulari són correctes.</p>
<p>Les validacions a realitzar són les següents:</p>
<ol>
<li>Els camps requerits no han de quedar buits. Ni contenir espais en blanc a l'inici i al final.</li>
<li>Els camps email i data han de tenir el format esperat.</li>
<li>Tots els camps s'han de filtrar amb <code>htmlspecialchars</code> per a evitar atacs de <em>Cross-site Scripting</em> (XSS).</li>
</ol>
<p>Aquest article sobre <em>Cross-site Scripting</em> és molt il·lustratiu: <a href="https://www.w3schools.com/php/php_form_validation.asp">PHP Form Validation</a></p>
<h4 id="valors-buits">Valors buits</h4>
<ol>
<li>Els camps requerits no deurien quedar-se buits.</li>
<li>Per a verificar que un valor no queda buit podem utilitzar la funció <code>empty()</code> de PHP.</li>
</ol>
<h4 id="espais-en-blanc">Espais en blanc</h4>
<ol>
<li>Hem d'eliminar els espais en blanc del principi i final dels camps.</li>
<li>S'utilitza la funció <code>trim</code></li>
</ol>
<h4 id="escapar-lentrada">Escapar l'entrada</h4>
<p>Sempre hem de filtrar l'entrada amb <code>htmlspecialchars</code> abans de mostrar el camp amb <code>echo</code> o similar. Acò convertirà
qualsevol caràcter especial d'html en la entitat corresponent, així no interferirà en el el programa.</p>
<h4 id="comprovar-lemail">Comprovar l'email</h4>
<p>Per a verificar si un email és correcte podem utilitzar la funció <code>filter_var</code> </p>
<p><div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nb">filter_var</span><span class="p">(</span><span class="nv">$email</span><span class="p">,</span> <span class="nx">FILTER_VALIDATE_EMAIL</span><span class="p">)</span>
</code></pre></div>
o la funció <code>filter_input</code> quan obtenin les dades directament d'una variable extern.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="c1">// suposem que rebem les dades d'un formulari que té un quadre de text de nom 'email'</span>
<span class="linenos" data-linenos="2 "></span><span class="nv">$email</span> <span class="o">=</span> <span class="nb">filter_input</span><span class="p">(</span><span class="nx">INPUT_POST</span><span class="p">,</span> <span class="s1">'email'</span><span class="p">,</span> <span class="nx">FILTER_VALIDATE_EMAIL</span><span class="p">)</span>
</code></pre></div>
<h4 id="filter_input">filter_input</h4>
<p><div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nb">filter_input</span><span class="p">(</span><span class="nx">int</span> <span class="nv">$type</span><span class="p">,</span> <span class="nx">string</span> <span class="nv">$variable_name</span><span class="p">[,</span> <span class="nx">int</span> <span class="nv">$filter</span><span class="o">=</span><span class="nx">FILTER_DEFAULT</span><span class="p">[,</span> <span class="nx">mixed</span> <span class="nv">$options</span><span class="p">]])</span><span class="o">:</span><span class="nx">mixed</span>
</code></pre></div>
La funció <code>filter_input</code> agafa una variable externa (<code>$_GET</code>, <code>$_POST</code>, etc) concreta pel seu nom i aplica el filtre indicat.</p>
<p>Els filtres poden <a href="https://www.php.net/manual/es/filter.filters.validate.php">sanejar</a> o <a href="https://www.php.net/manual/es/filter.filters.sanitize.php">validar</a> les variables externes.</p>
<p>Per exemple, si volem agafar el valor del paràmetre <em>nom</em>  del querystring (<code>http://localhost/index.php?nom=&lt;h1&gt;Homer&lt;/h1&gt;</code>) usarem el tipus <code>INPUT_GET</code>.</p>
<p>El filtre <code>FILTER_SANITIZE_STRING</code> elimina etiquetes, i opcionalment elimina o codifica caracters especials.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nv">$nom</span> <span class="o">=</span> <span class="nb">filter_input</span><span class="p">(</span><span class="nx">INPUT_GET</span><span class="p">,</span> <span class="s1">'nom'</span><span class="p">,</span> <span class="nx">FILTER_SANITIZE_STRING</span><span class="p">)</span><span class="o">.</span>  <span class="c1">// $nom = Homer</span>
</code></pre></div>
<p>Més informació en:</p>
<ul>
<li><a href="http://php.net/manual/es/function.filter-var.php">filter_var</a></li>
<li><a href="http://php.net/manual/es/function.filter-input.php">filter_input</a></li>
</ul>
<h3 id="comprovar-la-data">Comprovar la data</h3>
<ul>
<li>Per a comprovar la data hem de crear una funció a aquest efecte.</li>
<li>Podem utilitzar el mètode estàtic <code>createFromFormat</code> de la classe <code>DateTime</code></li>
</ul>
<p>Més informació: <a href="http://php.net/manual/es/datetime.createfromformat.php">http://php.net/manual/es/datetime.createfromformat.php</a></p>
<h4 id="exemple_1">Exemple</h4>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nv">$data1</span> <span class="o">=</span> <span class="s2">"2001-05-02"</span><span class="p">;</span> <span class="c1">// Data és de tipus string</span>
<span class="linenos" data-linenos="2 "></span><span class="c1">// DateTime::createFromFormat converteix una cadena de text a on objecte DateTime</span>
<span class="linenos" data-linenos="3 "></span><span class="c1">// ens tornarà una instància de DateTime o FALSE en cas d'error.</span>
<span class="linenos" data-linenos="4 "></span>
<span class="linenos" data-linenos="5 "></span><span class="nv">$dt1</span> <span class="o">=</span> <span class="nx">DateTime</span><span class="o">::</span><span class="na">createFromFormat</span><span class="p">(</span><span class="s1">'Y-m-d'</span><span class="p">,</span> <span class="nv">$data1</span><span class="p">);</span>  
<span class="linenos" data-linenos="6 "></span>
<span class="linenos" data-linenos="7 "></span><span class="k">if</span> <span class="p">(</span><span class="nv">$dt1</span> <span class="o">===</span> <span class="k">false</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos" data-linenos="8 "></span>    <span class="k">echo</span> <span class="s2">"La data d'inici és incorrecta"</span><span class="p">;</span>
<span class="linenos" data-linenos="9 "></span><span class="p">}</span>
</code></pre></div>
<p>https://www.php.net/manual/es/function.strtotime.php</p>
<p>També és habitual trobar els controls de data separats en 3 elements input. Un per a l’any, l’altre per a mes i l’altre per al dia.</p>
<h3 id="bones-practiques-en-lobtencio-de-dades-des-de-lexterior">Bones pràctiques en l’obtenció de dades des de l’exterior</h3>
<p>Cal seguir les següents bones pràctiques:</p>
<ol>
<li>No confieu mai (mai) en l’entrada des de l’exterior del vostre PHP.</li>
<li>Sanegeu i valideu l’entrada de dades sempre.</li>
<li>Les funcions <code>filter_var()</code> i <code>filter_input()</code> poden sanejar el text i validar els formats de text (per exemple, adreces de correu electrònic, enters).</li>
<li>Recordeu que l’entrada de dades no es limita a formularis enviats per l’usuari. Els fitxers carregats i descarregats, els valors de sessió, les dades de galetes i les dades de serveis web de tercers també són dades que venen de l'exterior.</li>
</ol>
<p>A mode de resum podíem resumir la gestió de formularis en el següent diagrama de flux.</p>
<p><img alt="Form handle" src="../assets/form-handle.png"/></p>
<p>En els següents recursos trobaràs informació addicional sobre els controls de formularis en HTML5:</p>
<ul>
<li><a href="https://developer.mozilla.org/es/docs/Learn/HTML/Forms">Formularios en HTML</a> en MDN web docs.</li>
<li><a href="https://developer.mozilla.org/es/docs/HTML/HTML5/Forms_in_HTML5">Formularios en HTML5</a> en MDN web docs.</li>
<li><a href="https://www.w3schools.com/html/html_forms.asp">HTML Forms</a> en W3CSchools.</li>
</ul>
<h2 id="sentencies-per-a-incloure-fitxers">Sentències per a incloure Fitxers</h2>
<p>Les sentències <code>include()</code> i <code>include_once()</code> i <code>require()</code> i <code>require_once()</code> inclouen i avaluen el fitxeru especificat. </p>
<p><code>include_once()</code> i <code>require_once()</code> a més verifique que el fitxer no haja sigut inclòs abans i és preferible a <code>include</code>. Cal ser curòs amb el <code>path</code> de l'arxiu a incloure. </p>
<p>La diferència entre <code>require</code> i <code>include</code> és el tractament de l'error quan el fitxer no existeix. Mentre <code>include</code> mostra un avís, <code>require</code> mostra una error fatal que para l'execució de l'script.</p>
<h3 id="ambit-de-les-variables_1">Àmbit de les variables</h3>
<p>Com s'observa en l'exemple següent, les variables creades abans de cridar l'include, estaran disponibles en el fitxer inclòs. 
És a dir, com si tot fora un únic document.</p>
<div class="tabbed-set" data-tabs="3:1"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio"><label for="__tabbed_3_1">fruits.php</label><div class="tabbed-content"></div>
</input></div>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="o">&lt;?</span><span class="nx">php</span>
<span class="linenos" data-linenos="2 "></span><span class="nv">$color</span> <span class="o">=</span> <span class="s1">'green'</span><span class="p">;</span>
<span class="linenos" data-linenos="3 "></span><span class="nv">$fruit</span> <span class="o">=</span> <span class="s1">'apple'</span><span class="p">;</span>
<span class="linenos" data-linenos="4 "></span><span class="k">include</span> <span class="s1">'fruit.view.php'</span>
</code></pre></div>
<div class="tabbed-set" data-tabs="4:1"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio"><label for="__tabbed_4_1">fruits.view.php</label><div class="tabbed-content"></div>
</input></div>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 2 "></span><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 3 "></span><span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Fruites<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 4 "></span><span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 5 "></span><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 6 "></span>    <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>
<span class="linenos" data-linenos=" 7 "></span>        <span class="cp">&lt;?</span><span class="o">=</span> <span class="s2">"A </span><span class="si">$color</span><span class="s2"> </span><span class="si">$fruit</span><span class="s2">"</span> <span class="cp">?&gt;</span> 
<span class="linenos" data-linenos=" 8 "></span>    <span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>       
<span class="linenos" data-linenos=" 9 "></span><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="10 "></span><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>
<h3 id="rutes">Rutes</h3>
<p>En l'exemple anterior <code>include "fruit.view.php"</code> la ruta s'especifica de forma relativa, és a dir, la ruta es calcularà a 
partir de l'execució del fitxer principal. A mesura que les aplicacions van creixent aquest tipus de rutes acaben sent un mal de cap.
Per això és recomanable escriure les inclusions de forma relativa però fixant prèviament el directori actual.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>require __DIR__ . '/fruits.view.php';
</code></pre></div>
<h2 id="pujada-de-fitxers">Pujada de fitxers</h2>
<p>Per a pujar fitxers PHP implementa un mecanisme senzill a través de la variable superglobal <code>$_FILES</code>.</p>
<p>En <a href="https://www.php.net/manual/es/features.file-upload.php">Pujada d'arxius</a> disposeu de tota la informació necessària per a gestionar la pujada d'arxius.</p>
<h3 id="formulari">Formulari</h3>
<p>Per poder utilitzar el tipus <code>file</code> en l'element <code>input</code> cal que el formulari incloga l'atribut <code>enctype</code> amb el valor <code>multipart/form-data</code>. </p>
<p>El valor de l'atribut <code>name</code> de l'element <code>input</code> serà l'índex de l'array associatiu <code>$_FILES</code> que ens permetrà obtenir tota la informació del procés de pujada del fitxer.</p>
<p>En el següent exemple:</p>
<p><div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="s">"upload.php"</span> <span class="na">enctype</span><span class="o">=</span><span class="s">"multipart/form-data"</span> <span class="na">method</span><span class="o">=</span><span class="s">"POST"</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="2 "></span>    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"hidden"</span> <span class="na">name</span><span class="o">=</span><span class="s">"MAX_FILE_SIZE"</span> <span class="na">value</span><span class="o">=</span><span class="s">"10240"</span><span class="p">&gt;</span>
<span class="linenos" data-linenos="3 "></span>    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"file"</span> <span class="na">name</span><span class="o">=</span><span class="s">"image"</span> <span class="p">/&gt;</span>
<span class="linenos" data-linenos="4 "></span>    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"submit"</span> <span class="na">value</span><span class="o">=</span><span class="s">"Upload"</span> <span class="p">/&gt;</span>
<span class="linenos" data-linenos="5 "></span><span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</code></pre></div>
Emprarem <code>$_FILES['image']</code> per obtenir les dades de l'arxiu penjat.</p>
<h3 id="variable-superglobal-_files">Variable superglobal <code>$_FILES</code></h3>
<p>Cada element en <code>$_FILES</code> és un array que aporta informació sobre el fitxer pujat. Les claus més importants són:</p>
<ul>
<li><code>name</code>. El nom original del fitxer pujat. No és massa útil perquè el sistema original pot tindre convencions diferents i pot generar col·lisions si l'utilitzem per a emmagatzemar-lo en la seua ubicació definitiva.</li>
<li><code>type</code>. El tipus MIME del fitxer deduït pel navegador.</li>
<li><code>size</code>. La grandària en bytes del fitxer. Si el fitxer és massa gran el valor enviat serà 0.</li>
<li><code>tmp_name</code>. El nom temporal del fitxer en el servidor on s'ha emmagatzemat el fitxer pujat. </li>
</ul>
<h3 id="moure-el-fitxer">Moure el fitxer</h3>
<p>Com que el fitxer pujat es guarda en una carpeta temporal hem d'emprar la funció <a href="https://www.php.net/manual/es/function.move-uploaded-file.php"><code>move_uploaded_file</code></a> per a guardar-lo en la ubicació definitiva. </p>
<p>La funció <a href="https://www.php.net/manual/es/function.is-uploaded-file.php"><code>is_uploaded_file</code></a> ens permet a assegurar-nos que el fitxer ha estat pujat usant HTTP POST i no es tracta d'un fitxer maliciós.</p>
<p><code>move_uploaded_file</code> ja fa eixa comprovació en executar-se.</p>
<h3 id="gestio-derrors">Gestió d'errors</h3>
<p>PHP torna un codi d'error en <code>$_FILES</code>. El codi es pot trabar en la clau <code>error</code>. Per exemple: <code>$_FILES['image']['error']</code>. </p>
<p>Els missates d'error més importants són:</p>
<ul>
<li><code>UPLOAD_ERR_OK</code>: La pujada ha sigut correcta.</li>
<li><code>UPLOAD_ERR_INI_SIZE</code>: La grandària del fitxer que s'intenta pujar és major que el valor indicat en la directiva <code>upload_max_filesize</code>.</li>
<li><code>UPLOAD_ERR_FORM_SIZE</code>: La grandària del fitxer que s'intenta pujar és major que el valor indicat en el formulari en <code>max_file_size</code>. </li>
<li><code>UPLOAD_ERR_NO_FILE</code>: No s'ha enviat cap fitxer.</li>
</ul>
<p>En <a href="https://www.php.net/manual/es/features.file-upload.errors.php">Explicació dels missatges d'error</a> teniu més informació.</p>
<h2 id="activitats">Activitats</h2>
<h3 id="cadenes">Cadenes</h3>
<ol start="221">
<li>
<p><code>221Cadenes.php</code>: Copia el contingut de la pàgina <code>index.php</code>, activa la directiva de tipus estricta (<code>declare( strict_types = 1 );</code>) i mostra el següent: </p>
<ol>
<li>Elimina els espais del principi i el final del nom si els hi haguera (<em>trim</em>). </li>
<li>Elimina la lletra a del principi i el final del nom si els hi haguera (<em>trim</em>). </li>
<li>Mostra la variable nom en majúscules, minúscules i amb la primera lletra en majúscula i les altres en minúscules (<em>strtoupper</em>, <em>strtolower</em>, <em>ucfirst</em>). </li>
<li>Mostra el codi ascii de la primera lletra del nom (<em>ord</em>). </li>
<li>Mostra la longitud del nom (<em>strlen</em>). </li>
<li>Mostra el nombre de vegades que apareix la lletra a (majúscula o minúscula, <em>substr_count</em>). </li>
<li>Mostra la posició de la primera <code>a</code> existent en el nom, siga majúscula o minúscula (<em>strpos</em>). Si no hi ha cap mostrarà -1. </li>
<li>El mateix, però amb l''última a. </li>
<li>Mostra el nom substituint la lletr o pel número zero, siga majúscula o minúscula (<em>str_replace</em>). </li>
<li>Indica si el nom comença per <code>al</code> o no. </li>
</ol>
</li>
<li>
<p><code>222Cadenes.php</code>: En el mateix document <code>cadenes.php</code> i a partir d'una variable que continga una url:<br/>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="nv">$url</span><span class="o">=</span><span class="s1">'http://username:password@hostname:9090/path?arg=value#anchor'</span><span class="p">;</span>
</code></pre></div>
      Utilitza la funció <code>parse_url</code> per a extraure de la url les següents parts:<br/>
        1. El protocol utilitzat (en l'exemple "http").<br/>
        2. El nom d'usuari (en l'exemple "username").
        3. El path de la url (en l'exemple "/path").
        4. El querystring de la url (en l'exemple "arg=value").</p>
</li>
</ol>
<h3 id="arrays-indexats">Arrays indexats</h3>
<ol start="231">
<li>
<p><code>231Arrays.php</code>: Crea una pàgina, copia el contingut de la pàgina <code>index.php</code> i resol els exercicis següents 
utilitzant funcions d'arrays:</p>
<ol>
<li>Crea un array amb els noms de diversos alumnes de la classe incloent el teu. </li>
<li>Mostra el nombre d'elements que té l'array (<em>count</em>). </li>
<li>Crea una cadena de text que continga els noms dels alumnes existents en l'array separats per un espai i 
mostra-la (<em>implode</em>).</li>
<li>Mostra l'array en un ordre aleatori diferent al que ho vas crear (<em>shuffle</em>). </li>
<li>Mostra l'array ordenat alfabèticament (<em>sort</em>). </li>
<li>Mostra els alumnes el nom dels quals continga almenys una “a” (<em>array_filter</em>).</li>
<li>Mostra l'array en l'ordre invers al que es va crear (<em>rsort</em>). </li>
<li>Mostra la posició que té el teu nom en l'array (<em>array_search</em>).</li>
</ol>
</li>
<li>
<p><code>232Ciutats.php</code>: Segons l'INE les 7 ciutats més grans d’Espanya (per habitants) el 2018 van ser les següents:</p>
<ul>
<li>Madrid, MAD, 3.223.334</li>
<li>Sevilla, AN  , 688.711</li>
<li>Murcia, MU,  447.182</li>
<li>Málaga, AN,  571.026</li>
<li>Zaragoza, AR, 666.880</li>
<li>València, CV,     791.413</li>
<li>Barcelona, CAT, 1.620.343</li>
</ul>
<p>Copia <code>index.php</code> i crea un nou document <code>cituats.php</code>. Defineix un array que continga aquesta informació sobre ciutats i 
habitants. Imprimeix una taula d'ubicacions i habitants que incloga la població total de les 7 ciutats.</p>
<p>Opcional:
Modifica la solució de l’anterior exercici perquè mostre les ciutats ordenades per habitants. Després mostra-les per ordre alfabètic.</p>
</li>
</ol>
<h3 id="arrays-multidimensionals_1">Arrays multidimensionals</h3>
<ol start="233">
<li>
<p><code>233Alumnes.php</code>: Resol els exercicis següents utilitzant funcions d'arrays: </p>
<ol>
<li>Crea un array d'alumnes on cada element siga un altre array que continga nom i edat de l'alumne. </li>
<li>Crea una taula HTML en la qual es mostren totes les dades dels alumnes. </li>
<li>Utilitza la funció <code>array_column</code> per a obtenir un array indexat que continga únicament els noms dels alumnes i mostra’ls per pantalla.    </li>
<li>Crea un array amb 10 números i utilitza la funció <code>array_sum</code> per a obtenir la suma dels 10 nombres. </li>
<li>Sense usar bucles for calcula la mitjana d'edat de l'alumnat.     </li>
</ol>
</li>
<li>
<p><code>234CiutatsOpcional.php</code>: Modifica la solució del exercici <code>ciutats.php</code> perquè la taula continga també la columna del total d’habitants de la 
comunitat autònoma de les ciutats de la llista i el percentatge sobre els habitants de la comunitat autònoma que representa.</p>
<p>Per exemple: </p>
<table>
<thead>
<tr>
<th>Ciutat</th>
<th align="right">Habitants</th>
<th align="right">Habitats CA</th>
<th align="right">% sobre CA</th>
</tr>
</thead>
<tbody>
<tr>
<td>València</td>
<td align="right">791.413</td>
<td align="right">5.003.769</td>
<td align="right">15.81%</td>
</tr>
</tbody>
</table>
<p>Pista: Caldrà modificar l'array  <code>$ciutats</code> i convertir-lo en multidimensional. Les dades de comunitats autònomes hauran
d'estar en un altre array. </p>
<p>Dades: <a href="https://es.wikipedia.org/wiki/Anexo:Municipios_de_Espa%C3%B1a_por_poblaci%C3%B3n">Municipis de España</a></p>
</li>
</ol>
<h3 id="funcions_1">Funcions</h3>
<ol start="241">
<li>
<p><code>241funcions.php</code>: Escriu una funció per retornar una etiqueta HTML <code>&lt;img /&gt;</code>. </p>
<p>La funció hauria d’acceptar com a argument obligatori l’URL de la imatge i arguments opcionals per a un text 
  alternatiu, alçada i amplada.</p>
</li>
<li>
<p><code>242funcions.php</code>: Copieu la funció de l’exercici anterior i modifiqueu-la de manera que només es passe el nom de fitxer a la funció en
lloc de l’URL completa. Dins de la funció, farem ús d’una variable global per fer l’URL completa.</p>
<p>Per exemple, si passem <code>photo.png</code> a la funció, i la variable global conté <code>/images</code>, llavors l’atribut <code>src</code> de 
  l'etiqueta <img/> retornada serà <code>/images/photo.png</code>. </p>
<p>Una funció com aquesta és una forma senzilla de mantenir correctes les vostres etiquetes d’imatges, fins i tot si les
  imatges es mouen a un nou camí o servidor. Només cal canviar la variable global, per exemple, de <code>/images</code> a 
  <code>http://images.example.com/.</code></p>
</li>
<li>
<p><code>243funciocolors.php</code>:  Els colors web com <code>#ffffff</code> i <code>#cc3399</code> es realitzen concatenant els valors hexadecimals de color per a vermell, 
verd i blau. </p>
<p>Escriu una funció que accepte 3 arguments: roig, verd i blau, i que retorne un string que conté el color adequat per
  utilitzar-lo en una pàgina web. </p>
<p>Per exemple, si els arguments són 255, 0, i 255, llavors la cadena retornada hauria de ser #FF00FF.</p>
<p>Pot resultar útil utilitzeu la funció <code>dechex()</code> integrada, que es troba documentada a <a href="http://www.php.net/">http://www.php.net/</a></p>
<p>Assegureu-vos que els paràmetres reben valors enters i que són colors vàlids.</p>
<p>Implementa 3 exemples d’ús.</p>
</li>
<li>
<p><code>244funcionsSQL.php</code>: Crea una funció anomenada <code>insert</code>  que ens genere una sentència INSERT INTO en SQL.  </p>
<p>Per a açò la funció rebrà dos paràmetres:<br/>
      1. El nom de la taula<br/>
      2.   Un array associatiu que contindrà els noms i valors dels camps de la taula.</p>
<p>La sentència resultant tindrà la següent forma: </p>
<p><div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>“INSERT INTO nom_taula (nom dels camps separats per comes) 
<span class="linenos" data-linenos="2 "></span>  VALUES (noms dels camps separats per comes amb el caràcter “:” davant)  
</code></pre></div>
De moment, no farem res amb els valors dels camps. </p>
<p>Ajuda: utilitza les funcions <code>sprintf</code>, <code>implode</code> i <code>array_keys</code></p>
</li>
<li>
<p><code>245funcionsSQL2.php</code>: A partir de l'exercici anterior crea una altra funció que reba els mateixos paràmetres més un paràmetre booleà 
per a indicar si volem generar la query amb els noms dels camps o no. </p>
<p>El paràmetre tindrà el valor <code>true</code> per defecte.</p>
<p>Si el seu valor és <code>true</code> generarà la consulta igual que en l'exercici anterior, però si és <code>false</code> la generarà així: </p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">nom_taula</span> 
<span class="linenos" data-linenos="2 "></span>  <span class="k">VALUES</span> <span class="p">(</span><span class="n">valors</span> <span class="n">dels</span> <span class="n">camps</span> <span class="n">separats</span> <span class="n">per</span> <span class="n">comes</span> <span class="n">amb</span> <span class="n">el</span> <span class="n">caràcter</span> <span class="err">‘</span><span class="p">:</span><span class="err">’</span> <span class="n">davant</span><span class="p">)</span>
</code></pre></div>
</li>
<li>
<p><code>246funcionsSQLReferencia.php</code>: Repeteix l'exercici anterior amb els següents canvis: </p>
<p>La cadena resultant es passarà per referència.</p>
<p>Passarem la cadena de la següent forma: </p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span>  <span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">taula</span> <span class="p">(</span><span class="n">camps</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="n">valors</span><span class="p">)</span> 
</code></pre></div>
<p>Dins de la funció substituirem el següent: </p>
<ol>
<li>El text taula pel nom de la taula. </li>
<li>El text camps pels noms dels camps separats per comes</li>
<li>El text valors pels noms dels camps separats per comes i el caràcter ‘:’ davant. </li>
</ol>
</li>
</ol>
<h3 id="formularis">Formularis</h3>
<ol start="261">
<li>
<p><code>261ExempleGet.php</code>: Crea una pàgina que reba com a paràmetre un nom i mostre el text ‘Benvingut [nom]!!!’ sent [nom] el nom has 
passat com a paràmetre.</p>
</li>
<li>
<p><code>262Formulari.php</code>: Crea un formulari que tinga els següents camps:</p>
<ul>
<li><code>firstname</code></li>
<li><code>lastname</code></li>
<li><code>phone</code></li>
<li><code>email</code></li>
</ul>
<p>En l'atribut <code>action</code> del formulari posarem el següent:</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="s">"262Formulari.php"</span> <span class="err">...</span><span class="p">/&gt;</span>
</code></pre></div>
<p>Açò farà que siga la pròpia pàgina del formulari la que processe les dades del mateix.</p>
<p>En prémer <code>Enviar</code> han d'aparèixer sota el formulari les dades que s'han introduït en el mateix en format de 
taula.</p>
</li>
<li>
<p><code>263FormulariReparat.php</code>: Soluciona el problema dels paràmetres no enviats de l'exercici anterior.</p>
</li>
<li>
<p><code>264FormulariValidat.php</code>: Modifica l'exercici anterior realitzant les següents validacions:</p>
<ul>
<li>Tots els camps són obligatoris.</li>
<li><code>firstname</code>, no pot superar els 25 caracters.</li>
<li><code>lastname</code>, no pot superar els 50 caracters.</li>
<li><code>phone</code>, ha de contenir 9 digits (expressió regular: <code>^\d{9}$</code>).</li>
<li><code>email</code>, ha de ser una adreça electrònica correcta.</li>
</ul>
<p>S'avaluaran tots els camps i si hi ha error/s caldrà mostrar-lo/s. Si no hi ha errors es mostraran les dades introduïdes per l'usuari.</p>
</li>
<li>
<p><code>265FormulariOpcions.php</code>: Modifica l'exercici anterior afegint els següents camps al formulari:</p>
<ul>
<li><code>genre</code>: serà un <em>radio button</em> i podrà ser <em>home</em>, <em>dona</em> i <em>no binari</em>.</li>
<li><code>hobbies</code>: serà un checkbox amb aficions de la que podràs triar-ne més d'una:<ul>
<li>Lectura</li>
<li>Programació</li>
<li>Ciclisme</li>
<li>Running</li>
<li>...</li>
</ul>
</li>
<li><code>contact-time</code>: serà una llista de les millores hores per a contactar: <ul>
<li>Primera hora (08:00 a 10:00)</li>
<li>Abans de dinar (12:00 a 13:00)</li>
<li>Després de dinar (14:00 a 16:00)</li>
<li>Per la nit (20:00 a 22:00)</li>
</ul>
</li>
</ul>
<p>En els tres casos són obligatoris, s'ha de mantindre el valor en cas de ser correcte .</p>
</li>
<li>
<p><code>266FormulariArray</code>: Modifica l'exercici anterior de forma que el contingut dels camps de selecció es genere dinàmicament des d'arrays associatius. A més, els valors rebuts s'haurien de validar contra l'<em>array</em> i mostrar-se fent és d'ell.</p>
</li>
</ol>
<h3 id="inclusio-de-fitxers">Inclusió de fitxers</h3>
<ol>
<li>
<p><code>271Formulari.php</code>: Basant-te en l'activitat <code>264FormulariValidat.php</code> modifica les validacions perquè es facen mitjançant funcions. </p>
<p>Les funcions es guardaran en el fitxer <code>helpers.php</code> i s'hauran d'incloure en fitxer <code>271Formulari.php</code>.</p>
</li>
<li>
<p><code>272Formulari.php</code>: Basant-te en l'activitat <code>271Formulari.php</code> separa la part de codi de la presentació de forma que tota la lògica estiga en un fitxer i la part de presentació en altre fitxer <code>271Formulari.view.php</code>.</p>
</li>
</ol>
<h3 id="pujada-de-fitxers_1">Pujada de fitxers</h3>
<ol>
<li><code>281FormularImatge.php</code>: Modifica l'activitat <code>272Formulari.php</code> afegint un camp de tipus <code>FILE</code> per a pujar una imatge al servidor. Es guardarà en la carpeta <code>uploads</code> i es mostrarà amb la resta de dades. </li>
<li><code>282FormulariImage.php</code>: Modifica l'activitat anterior de forma que es controle el següent:<ol>
<li>Les imatges sols podran ser <code>jpg</code>.</li>
<li>No podran superar 1MB de grandària</li>
<li>Es guardaran en un nom aleatori únic.</li>
</ol>
</li>
</ol>
<h2 id="credits">Crèdits</h2>
<ul>
<li>Aitor Medrano. (setembre de 2021) <em>Desarrollo Web en Entorno Servidor</em> disponible en: <a href="https://aitor-medrano.github.io/dwes2122/index.html">https://aitor-medrano.github.io/dwes2122/index.html</a></li>
</ul>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Anterior: 1.- Introducció a la programació Web" class="md-footer__link md-footer__link--prev" href="../01-intro/" rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</div>
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Anterior
              </span>
              1.- Introducció a la programació Web
            </div>
</div>
</a>
<a aria-label="Següent: PHP OO Bàsic" class="md-footer__link md-footer__link--next" href="../03-phpoo/0301-phpoo-basic/" rel="next">
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Següent
              </span>
              PHP OO Bàsic
            </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
            2021-2022 Vicent Jordà - Licencia CC BY-NC-SA
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
          Material for MkDocs
        </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "..", "features": ["toc.integrate"], "translations": {"clipboard.copy": "C\u00f2pia al porta-retalls", "clipboard.copied": "Copiat al porta-retalls", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Cerca", "search.result.placeholder": "Escriu per a comen\u00e7ar a cercar", "search.result.none": "Cap document coincideix", "search.result.one": "1 document coincident", "search.result.other": "# documents coincidents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.409db549.min.js", "version": null}</script>
<script src="../assets/javascripts/bundle.756773cc.min.js"></script>
<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</body>
</html>